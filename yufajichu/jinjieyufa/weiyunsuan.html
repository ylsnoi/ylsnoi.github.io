<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>位运算 - 姚老师信奥网</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A80F0', // 主色调：鲜明的蓝色
                        secondary: '#6C63FF', // 辅助色：紫色
                        syntax: '#FF9800', // 语法部分：橙色
                        algorithm: '#2ECC71', // 算法部分：绿色
                        datastructure: '#9C27B0', // 数据结构部分：深紫色
                        darkbg: '#F8FAFC', // 浅灰白背景
                        cardbg: '#FFFFFF', // 卡片背景
                        hoverbg: '#F0F2F5', // 悬停背景
                        bitwise: '#009688', // 位运算主题色：青绿色
                        execution: '#FFEB3B', // 执行高亮：黄色
                    },
                    fontFamily: {
                        mono: ['Consolas', 'Monaco', 'Courier New', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .hover-scale {
                @apply transition-transform duration-300 hover:scale-[1.02];
            }
            .category-bg {
                @apply bg-gradient-to-r from-primary/5 to-primary/10;
            }
            .subcategory-bg {
                @apply bg-gradient-to-r from-secondary/5 to-secondary/10;
            }
            .bitwise-bg {
                @apply bg-gradient-to-r from-bitwise/5 to-bitwise/10;
            }
            .card-shadow {
                @apply shadow-sm hover:shadow-md transition-shadow duration-300;
            }
            .nav-item {
                @apply text-gray-700 hover:text-primary transition-colors duration-200;
            }
            .topic-card {
                @apply bg-cardbg rounded-lg p-5 card-shadow hover-scale;
            }
            .subtopic-item {
                @apply bg-white rounded-md p-3 border border-gray-100 hover:border-primary/50 transition-all duration-200 cursor-pointer;
            }
            .topic-header {
                @apply text-xl font-bold text-primary mb-4 flex items-center;
            }
            .subtopic-header {
                @apply font-semibold text-secondary mb-3;
            }
            .bitwise-header {
                @apply font-bold text-bitwise mb-3;
            }
            .site-title {
                @apply text-2xl font-bold text-primary tracking-tight;
            }
            .code-block {
                @apply bg-gray-800 text-gray-100 rounded-lg p-4 overflow-x-auto my-4 text-sm font-mono;
            }
            .step-item {
                @apply p-3 rounded-md mb-2 border-l-4 border-bitwise bg-bitwise/5;
            }
            .step-number {
                @apply inline-block w-6 h-6 rounded-full bg-bitwise text-white text-center mr-2 text-xs;
            }
            .bitwise-operation {
                @apply border-2 border-gray-300 rounded-md p-2 mb-1 bg-gray-50 transition-all duration-500;
            }
            .bitwise-operation-active {
                @apply border-bitwise bg-bitwise/10 transform scale-[1.02];
            }
            .animation-controls {
                @apply flex flex-wrap gap-2 items-center my-4;
            }
            .animation-step {
                @apply bg-gray-100 p-3 rounded-lg mb-4;
            }
            .animation-progress {
                @apply w-full bg-gray-200 rounded-full h-2.5 mb-2;
            }
            .animation-progress-bar {
                @apply bg-bitwise h-2.5 rounded-full transition-all duration-300;
            }
            .animation-status {
                @apply text-sm text-gray-600 my-2 p-2 bg-gray-50 rounded;
            }
            .code-line {
                @apply transition-all duration-300;
            }
            .code-line-highlight {
                @apply bg-execution/30 text-gray-900 font-medium;
            }
            .bit-visual {
                @apply flex justify-center gap-1 my-4 font-mono;
            }
            .bit {
                @apply w-8 h-8 flex items-center justify-center border border-gray-300 rounded bg-gray-100 text-gray-800;
            }
            .bit-highlight {
                @apply bg-bitwise text-white border-bitwise;
            }
        }
    </style>
</head>
<body class="bg-darkbg text-gray-800 font-sans min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fa fa-code text-primary text-3xl"></i>
                <h1 class="site-title">姚老师信奥网</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" class="nav-item">首页</a>
                <a href="#" class="nav-item">课程</a>
                <a href="#" class="nav-item">题库</a>
                <a href="#" class="nav-item">关于我们</a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- 搜索框 -->
                <div class="relative hidden md:block">
                    <input type="text" id="search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-64">
                    <button id="search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
                <div class="md:hidden">
                    <button class="text-gray-700">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移动端搜索框 -->
        <div class="md:hidden px-4 pb-3">
            <div class="relative">
                <input type="text" id="mobile-search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-full">
                <button id="mobile-search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 面包屑导航 -->
    <div class="bg-white border-b border-gray-200 py-2">
        <div class="container mx-auto px-4">
            <nav class="flex text-sm" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="#" class="text-gray-600 hover:text-primary">
                            <i class="fa fa-home mr-1"></i>首页
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">语法基础</a>
                        </div>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">数据运算</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <span class="text-bitwise font-medium">位运算</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 页面标题 -->
        <div class="bitwise-bg rounded-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row md:items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-bitwise mb-2">位运算</h1>
                    <p class="text-gray-700">
                        位运算是对二进制位进行的操作，是信息学奥赛中优化程序性能的重要技巧。本页面将详细讲解C++中的六种基本位运算（与、或、异或、取反、左移、右移）及其在算法竞赛中的应用。
                    </p>
                </div>
                <div class="mt-4 md:mt-0">
                    <div class="flex space-x-3">
                        <a href="#concept" class="bg-bitwise hover:bg-bitwise/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-book mr-2"></i> 学习概念
                        </a>
                        <a href="#problems" class="bg-white border border-bitwise text-bitwise hover:bg-bitwise/5 px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-list-alt mr-2"></i> 查看题目
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 位运算概述 -->
        <section id="concept" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bitwise mb-6 flex items-center">
                <i class="fa fa-info-circle mr-2"></i> 位运算概述
            </h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold mb-3">什么是位运算？</h3>
                    <p class="text-gray-700">
                        位运算是直接对整数的二进制位进行操作的运算。在信息学奥赛中，位运算因其高效性（通常比算术运算更快）和独特的特性，被广泛用于优化程序性能、解决特定问题。
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg mt-3">
                        <h4 class="font-semibold mb-2">位运算的优势：</h4>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>运算速度快，直接在CPU层面进行操作</li>
                            <li>内存占用少，能表示复杂状态</li>
                            <li>可以实现一些算术运算难以实现的功能</li>
                            <li>常用于状态压缩、加密算法、图形处理等场景</li>
                            <li>在算法竞赛中可优化时间复杂度</li>
                        </ul>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-3">C++中的六种位运算</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="py-3 px-4 border-b text-left">运算符</th>
                                    <th class="py-3 px-4 border-b text-left">名称</th>
                                    <th class="py-3 px-4 border-b text-left">描述</th>
                                    <th class="py-3 px-4 border-b text-left">示例</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="py-3 px-4 border-b font-mono"> & </td>
                                    <td class="py-3 px-4 border-b">按位与</td>
                                    <td class="py-3 px-4 border-b">两个位都为1时，结果为1</td>
                                    <td class="py-3 px-4 border-b font-mono">3 & 5 = 1 (0011 & 0101 = 0001)</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="py-3 px-4 border-b font-mono"> | </td>
                                    <td class="py-3 px-4 border-b">按位或</td>
                                    <td class="py-3 px-4 border-b">两个位中有一个为1时，结果为1</td>
                                    <td class="py-3 px-4 border-b font-mono">3 | 5 = 7 (0011 | 0101 = 0111)</td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4 border-b font-mono"> ^ </td>
                                    <td class="py-3 px-4 border-b">按位异或</td>
                                    <td class="py-3 px-4 border-b">两个位不同时，结果为1</td>
                                    <td class="py-3 px-4 border-b font-mono">3 ^ 5 = 6 (0011 ^ 0101 = 0110)</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="py-3 px-4 border-b font-mono"> ~ </td>
                                    <td class="py-3 px-4 border-b">按位取反</td>
                                    <td class="py-3 px-4 border-b">将位取反，1变为0，0变为1</td>
                                    <td class="py-3 px-4 border-b font-mono">~3 = -4 (~0011 = 1100，补码表示)</td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4 border-b font-mono"> << </td>
                                    <td class="py-3 px-4 border-b">左移</td>
                                    <td class="py-3 px-4 border-b">将位向左移动指定的位数</td>
                                    <td class="py-3 px-4 border-b font-mono">3 << 2 = 12 (0011 << 2 = 1100)</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="py-3 px-4 border-b font-mono"> >> </td>
                                    <td class="py-3 px-4 border-b">右移</td>
                                    <td class="py-3 px-4 border-b">将位向右移动指定的位数</td>
                                    <td class="py-3 px-4 border-b font-mono">5 >> 1 = 2 (0101 >> 1 = 0010)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- 位运算动画演示 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bitwise mb-6 flex items-center">
                <i class="fa fa-play-circle mr-2"></i> 位运算过程演示
            </h2>
            
            <div class="space-y-6">
                <!-- 位运算动画 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">位运算执行过程可视化</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <p class="text-gray-700 mb-4">
                                下面的动画展示了位运算的执行过程，包括二进制表示和每一位的运算结果。
                                选择不同的运算类型和操作数，观察位运算的具体执行过程。
                            </p>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">选择运算类型:</label>
                                <select id="operation-type" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-bitwise">
                                    <option value="and">按位与 (&)</option>
                                    <option value="or">按位或 (|)</option>
                                    <option value="xor">按位异或 (^)</option>
                                    <option value="left">左移 (<<)</option>
                                    <option value="right">右移 (>>)</option>
                                </select>
                            </div>
                            
                            <div class="mb-4" id="operand-container">
                                <label class="block text-sm font-medium text-gray-700 mb-2">输入操作数:</label>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <input type="number" id="operand1" value="3" min="0" max="255"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-bitwise">
                                    </div>
                                    <div id="second-operand">
                                        <input type="number" id="operand2" value="5" min="0" max="31"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-bitwise">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button id="bitwise-run" class="bg-bitwise hover:bg-bitwise/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-play mr-2"></i> 运行动画
                                </button>
                                <button id="bitwise-reset" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-refresh mr-2"></i> 重置
                                </button>
                            </div>
                            
                            <div id="bitwise-status" class="animation-status hidden">
                                状态: 等待开始
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 h-64 overflow-y-auto" id="bitwise-execution">
                                <div class="text-center text-gray-500 py-8">
                                    <i class="fa fa-arrow-down mb-2"></i>
                                    <p>点击"运行动画"开始演示</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-gray-800 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto font-mono text-sm" id="bitwise-code">
                                <div class="code-line" id="bcode-1">#include &lt;iostream&gt;</div>
                                <div class="code-line" id="bcode-2">using namespace std;</div>
                                <div class="code-line" id="bcode-3">&nbsp;</div>
                                <div class="code-line" id="bcode-4">int main() {</div>
                                <div class="code-line" id="bcode-5">&nbsp;&nbsp;int a = <span id="bcode-num1">3</span>;</div>
                                <div class="code-line" id="bcode-6">&nbsp;&nbsp;int b = <span id="bcode-num2">5</span>;</div>
                                <div class="code-line" id="bcode-7">&nbsp;&nbsp;int result;</div>
                                <div class="code-line" id="bcode-8">&nbsp;&nbsp;</div>
                                <div class="code-line" id="bcode-9">&nbsp;&nbsp;result = a <span id="bcode-op">&amp;</span> b;</div>
                                <div class="code-line" id="bcode-10">&nbsp;&nbsp;</div>
                                <div class="code-line" id="bcode-11">&nbsp;&nbsp;cout &lt;&lt; "结果: " &lt;&lt; result &lt;&lt; endl;</div>
                                <div class="code-line" id="bcode-12">&nbsp;&nbsp;</div>
                                <div class="code-line" id="bcode-13">&nbsp;&nbsp;return 0;</div>
                                <div class="code-line" id="bcode-14">}</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 二进制表示可视化 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">二进制位运算可视化</h3>
                    <div id="bit-visualization">
                        <div class="text-center mb-2">操作数 A: <span id="a-value">3</span></div>
                        <div class="bit-visual" id="bits-a">
                            <div class="bit">0</div>
                            <div class="bit">0</div>
                            <div class="bit">1</div>
                            <div class="bit">1</div>
                        </div>
                        
                        <div class="text-center mb-2">操作数 B: <span id="b-value">5</span></div>
                        <div class="bit-visual" id="bits-b">
                            <div class="bit">0</div>
                            <div class="bit">1</div>
                            <div class="bit">0</div>
                            <div class="bit">1</div>
                        </div>
                        
                        <div class="text-center mb-2">运算符: <span id="op-value">&amp;</span></div>
                        
                        <div class="text-center mb-2">结果: <span id="result-value">1</span></div>
                        <div class="bit-visual" id="bits-result">
                            <div class="bit">0</div>
                            <div class="bit">0</div>
                            <div class="bit">0</div>
                            <div class="bit">1</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 位运算的应用 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bitwise mb-6 flex items-center">
                <i class="fa fa-cogs mr-2"></i> 位运算的典型应用
            </h2>
            
            <div class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-3">1. 高效的算术运算</h3>
                        <pre class="code-block text-xs"><code class="language-cpp">// 乘2运算 (x * 2^n)
int multiplyByTwo(int x, int n) {
    return x << n;  // 左移n位等价于乘以2的n次方
}

// 除2运算 (x / 2^n)
int divideByTwo(int x, int n) {
    return x >> n;  // 右移n位等价于除以2的n次方（整数除法）
}

// 判断奇偶数
bool isOdd(int x) {
    return x & 1;   // 与1相&，结果为1则是奇数，0则是偶数
}

// 求平均值（避免溢出）
int average(int x, int y) {
    return (x + y) >> 1;  // 等价于(x + y) / 2
}</code></pre>
                        <p class="text-gray-700 text-sm mt-3">
                            位运算可以替代某些算术运算，执行效率更高，尤其适合对性能要求高的场景。
                        </p>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-3">2. 状态压缩与标记</h3>
                        <pre class="code-block text-xs"><code class="language-cpp">#include <iostream>
using namespace std;

// 位运算实现集合操作
const int MAXN = 20;

// 判断第k位是否为1（元素是否在集合中）
bool hasElement(int set, int k) {
    return set & (1 << k);
}

// 添加元素k到集合
int addElement(int set, int k) {
    return set | (1 << k);
}

// 从集合中移除元素k
int removeElement(int set, int k) {
    return set & ~(1 << k);
}

// 求两个集合的交集
int intersection(int setA, int setB) {
    return setA & setB;
}

// 求两个集合的并集
int unionSet(int setA, int setB) {
    return setA | setB;
}

int main() {
    int set = 0;
    set = addElement(set, 2);  // 添加元素2
    set = addElement(set, 5);  // 添加元素5
    cout << "集合中是否包含元素2: " << hasElement(set, 2) << endl;
    return 0;
}</code></pre>
                        <p class="text-gray-700 text-sm mt-3">
                            位运算非常适合实现状态压缩，用一个整数的二进制位表示多个布尔状态，节省内存空间。
                        </p>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-3">3. 位操作技巧</h3>
                        <pre class="code-block text-xs"><code class="language-cpp">#include <iostream>
using namespace std;

// 交换两个数（不使用临时变量）
void swap(int &a, int &b) {
    a ^= b;  // a = a ^ b
    b ^= a;  // b = b ^ (a ^ b) = a
    a ^= b;  // a = (a ^ b) ^ a = b
}

// 求一个数的绝对值
int abs(int x) {
    int sign = x >> 31;  // 获取符号位（假设32位整数）
    return (x ^ sign) - sign;
}

// 判断一个数是否是2的幂
bool isPowerOfTwo(int x) {
    return (x & (x - 1)) == 0 && x != 0;
}

// 计算二进制中1的个数（Brian Kernighan算法）
int countOneBits(int x) {
    int count = 0;
    while (x) {
        x &= x - 1;  // 清除最低位的1
        count++;
    }
    return count;
}

// 找到最低位的1
int findFirstSetBit(int x) {
    return x & -x;  // 利用补码特性
}</code></pre>
                        <p class="text-gray-700 text-sm mt-3">
                            位运算可以实现许多巧妙的编程技巧，解决特定问题时非常高效。
                        </p>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-3">4. 算法竞赛中的应用</h3>
                        <pre class="code-block text-xs"><code class="language-cpp">#include <iostream>
#include <vector>
using namespace std;

// 使用位运算枚举子集
void enumerateSubsets(const vector<int>& elements) {
    int n = elements.size();
    // 枚举所有可能的子集（2^n种）
    for (int mask = 0; mask < (1 << n); mask++) {
        cout << "子集 " << mask << ": ";
        for (int i = 0; i < n; i++) {
            // 检查第i位是否为1
            if (mask & (1 << i)) {
                cout << elements[i] << " ";
            }
        }
        cout << endl;
    }
}

// 求解N皇后问题的位运算优化版本
int totalNQueens(int n) {
    int result = 0;
    // 递归函数：row表示当前行，col表示列限制，diag1表示主对角线限制，diag2表示副对角线限制
    function<void(int, int, int, int)> solve = [&](int row, int col, int diag1, int diag2) {
        if (row == n) {
            result++;
            return;
        }
        // 计算可以放置皇后的位置
        int available = ((1 << n) - 1) & (~(col | diag1 | diag2));
        while (available) {
            // 找到最低位的可用位置
            int pos = available & -available;
            // 清除最低位的可用位置
            available ^= pos;
            // 递归处理下一行
            solve(row + 1, col | pos, (diag1 | pos) << 1, (diag2 | pos) >> 1);
        }
    };
    solve(0, 0, 0, 0);
    return result;
}

int main() {
    vector<int> elements = {1, 2, 3};
    enumerateSubsets(elements);
    cout << "4皇后问题的解的数量: " << totalNQueens(4) << endl;
    return 0;
}</code></pre>
                        <p class="text-gray-700 text-sm mt-3">
                            位运算在算法竞赛中应用广泛，特别是在状态压缩、枚举子集、棋盘问题等场景中能显著优化性能。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 位运算代码示例 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bitwise mb-6 flex items-center">
                <i class="fa fa-code mr-2"></i> 位运算代码示例 (C++)
            </h2>
            
            <div class="space-y-6">
                <!-- 基础位运算示例 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">1. 位运算基础操作</h3>
                    <p class="text-gray-700 mb-3">
                        演示六种基本位运算的使用方法和结果
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
#include <bitset>  // 用于二进制输出
using namespace std;

int main() {
    int a = 10;  // 二进制: 1010
    int b = 12;  // 二进制: 1100
    
    cout << "a = " << a << ", 二进制: " << bitset<8>(a) << endl;
    cout << "b = " << b << ", 二进制: " << bitset<8>(b) << endl;
    cout << endl;
    
    // 按位与
    int and_result = a & b;
    cout << "a & b = " << and_result << ", 二进制: " << bitset<8>(and_result) << endl;
    
    // 按位或
    int or_result = a | b;
    cout << "a | b = " << or_result << ", 二进制: " << bitset<8>(or_result) << endl;
    
    // 按位异或
    int xor_result = a ^ b;
    cout << "a ^ b = " << xor_result << ", 二进制: " << bitset<8>(xor_result) << endl;
    
    // 按位取反
    int not_result = ~a;
    cout << "~a = " << not_result << ", 二进制: " << bitset<8>(not_result) << endl;
    
    // 左移
    int left_result = a << 2;
    cout << "a << 2 = " << left_result << ", 二进制: " << bitset<8>(left_result) << endl;
    
    // 右移
    int right_result = b >> 2;
    cout << "b >> 2 = " << right_result << ", 二进制: " << bitset<8>(right_result) << endl;
    
    return 0;
}</code></pre>
                    <div class="bg-gray-800 text-gray-100 p-4 rounded-lg text-sm font-mono mt-3">
                        <p>输出结果：</p>
                        <p>a = 10, 二进制: 00001010</p>
                        <p>b = 12, 二进制: 00001100</p>
                        <p></p>
                        <p>a & b = 8, 二进制: 00001000</p>
                        <p>a | b = 14, 二进制: 00001110</p>
                        <p>a ^ b = 6, 二进制: 00000110</p>
                        <p>~a = -11, 二进制: 11110101</p>
                        <p>a << 2 = 40, 二进制: 00101000</p>
                        <p>b >> 2 = 3, 二进制: 00000011</p>
                    </div>
                </div>
                
                <!-- 位运算实现集合操作 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">2. 位运算实现集合操作</h3>
                    <p class="text-gray-700 mb-3">
                        使用位运算实现集合的交、并、补等操作，适合处理小规模集合
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
#include <bitset>
using namespace std;

// 集合操作函数
void printSet(int set, int n, const string& name) {
    cout << name << " = { ";
    for (int i = 0; i < n; i++) {
        if (set & (1 << i)) {
            cout << i << " ";
        }
    }
    cout << "}, 二进制: " << bitset<8>(set) << endl;
}

int main() {
    const int n = 5;  // 集合元素范围: 0~4
    int setA = 0b10101;  // 元素 {0, 2, 4}
    int setB = 0b10011;  // 元素 {0, 1, 4}
    
    printSet(setA, n, "集合A");
    printSet(setB, n, "集合B");
    cout << endl;
    
    // 并集
    int unionSet = setA | setB;
    printSet(unionSet, n, "A ∪ B (并集)");
    
    // 交集
    int intersectSet = setA & setB;
    printSet(intersectSet, n, "A ∩ B (交集)");
    
    // 差集 A - B
    int diffSet = setA & ~setB;
    printSet(diffSet, n, "A - B (差集)");
    
    // 对称差集
    int symDiffSet = setA ^ setB;
    printSet(symDiffSet, n, "A Δ B (对称差集)");
    
    // 补集
    int fullSet = (1 << n) - 1;  // 全集 {0,1,2,3,4}
    int complementSet = fullSet & ~setA;
    printSet(complementSet, n, "A' (补集)");
    
    return 0;
}</code></pre>
                </div>
                
                <!-- 位运算优化算法 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">3. 位运算优化的算法</h3>
                    <p class="text-gray-700 mb-3">
                        使用位运算优化的算法示例：计算二进制中1的个数和判断是否为2的幂
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
#include <bitset>
#include <chrono>  // 用于计时
using namespace std;

// 方法1: 简单循环法
int countBits1(int x) {
    int count = 0;
    while (x) {
        count += x & 1;  // 检查最低位是否为1
        x >>= 1;         // 右移一位
    }
    return count;
}

// 方法2: Brian Kernighan算法（更高效）
int countBits2(int x) {
    int count = 0;
    while (x) {
        x &= x - 1;  // 清除最低位的1
        count++;
    }
    return count;
}

// 判断一个数是否是2的幂
bool isPowerOfTwo(int x) {
    return x > 0 && (x & (x - 1)) == 0;
}

// 判断一个数是否是4的幂
bool isPowerOfFour(int x) {
    // 是2的幂，且二进制中1的位置在奇数位
    return x > 0 && (x & (x - 1)) == 0 && (x & 0x55555555) != 0;
}

int main() {
    int numbers[] = {0, 1, 5, 15, 16, 32, 64, 127, 128};
    int n = sizeof(numbers) / sizeof(numbers[0]);
    
    for (int i = 0; i < n; i++) {
        int num = numbers[i];
        cout << num << " (" << bitset<8>(num) << "): ";
        cout << "1的个数 = " << countBits2(num) << ", ";
        cout << "是2的幂? " << (isPowerOfTwo(num) ? "是" : "否") << ", ";
        cout << "是4的幂? " << (isPowerOfFour(num) ? "是" : "否") << endl;
    }
    
    return 0;
}</code></pre>
                </div>
            </div>
        </section>

        <!-- 位运算竞赛题应用 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bitwise mb-6 flex items-center">
                <i class="fa fa-trophy mr-2"></i> 位运算竞赛题应用
            </h2>
            
            <div class="space-y-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">例题1: 只出现一次的数字</h3>
                    <p class="text-gray-700 mb-3">
                        <strong>问题描述:</strong> 给定一个非空整数数组，除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。
                    </p>
                    <p class="text-gray-700 mb-3">
                        <strong>解题思路:</strong> 利用异或运算的特性：a ^ a = 0，a ^ 0 = a，且异或运算满足交换律和结合律。将数组中所有元素进行异或运算，最终结果即为只出现一次的数字。
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
#include <vector>
using namespace std;

int singleNumber(vector<int>& nums) {
    int result = 0;
    for (int num : nums) {
        result ^= num;  // 异或运算
    }
    return result;
}

int main() {
    vector<int> test1 = {2, 2, 1};
    vector<int> test2 = {4, 1, 2, 1, 2};
    vector<int> test3 = {1};
    
    cout << "测试1结果: " << singleNumber(test1) << endl;  // 输出1
    cout << "测试2结果: " << singleNumber(test2) << endl;  // 输出4
    cout << "测试3结果: " << singleNumber(test3) << endl;  // 输出1
    
    return 0;
}</code></pre>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">例题2: 子集枚举</h3>
                    <p class="text-gray-700 mb-3">
                        <strong>问题描述:</strong> 给定一个含n个不同元素的集合，输出该集合的所有子集。
                    </p>
                    <p class="text-gray-700 mb-3">
                        <strong>解题思路:</strong> 使用位运算枚举所有可能的子集，每个子集对应一个二进制数，二进制位为1表示对应元素在子集中。
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
#include <vector>
using namespace std;

// 枚举所有子集
vector<vector<int>> subsets(vector<int>& nums) {
    vector<vector<int>> result;
    int n = nums.size();
    // 枚举所有可能的子集（2^n种）
    for (int mask = 0; mask < (1 << n); mask++) {
        vector<int> subset;
        for (int i = 0; i < n; i++) {
            // 检查第i位是否为1
            if (mask & (1 << i)) {
                subset.push_back(nums[i]);
            }
        }
        result.push_back(subset);
    }
    return result;
}

int main() {
    vector<int> nums = {1, 2, 3};
    vector<vector<int>> allSubsets = subsets(nums);
    
    cout << "所有子集共 " << allSubsets.size() << " 个:" << endl;
    for (auto& subset : allSubsets) {
        cout << "{ ";
        for (int num : subset) {
            cout << num << " ";
        }
        cout << "}" << endl;
    }
    
    return 0;
}</code></pre>
                </div>
            </div>
        </section>
    </main>

    <script>
        // 初始化高亮
        document.addEventListener('DOMContentLoaded', function() {
            hljs.highlightAll();
            
            // 位运算动画相关元素
            const operationType = document.getElementById('operation-type');
            const operand1 = document.getElementById('operand1');
            const operand2 = document.getElementById('operand2');
            const runBtn = document.getElementById('bitwise-run');
            const resetBtn = document.getElementById('bitwise-reset');
            const executionDiv = document.getElementById('bitwise-execution');
            const statusDiv = document.getElementById('bitwise-status');
            const codeOp = document.getElementById('bcode-op');
            const codeNum1 = document.getElementById('bcode-num1');
            const codeNum2 = document.getElementById('bcode-num2');
            const aValue = document.getElementById('a-value');
            const bValue = document.getElementById('b-value');
            const opValue = document.getElementById('op-value');
            const resultValue = document.getElementById('result-value');
            
            // 二进制位显示元素
            const bitsA = document.getElementById('bits-a');
            const bitsB = document.getElementById('bits-b');
            const bitsResult = document.getElementById('bits-result');
            
            // 运算符映射
            const opMap = {
                'and': { symbol: '&', name: '按位与' },
                'or': { symbol: '|', name: '按位或' },
                'xor': { symbol: '^', name: '按位异或' },
                'left': { symbol: '<<', name: '左移' },
                'right': { symbol: '>>', name: '右移' }
            };
            
            // 更新运算符显示
            operationType.addEventListener('change', function() {
                const op = opMap[this.value];
                codeOp.textContent = op.symbol;
                opValue.textContent = op.symbol;
            });
            
            // 更新操作数显示
            operand1.addEventListener('input', function() {
                codeNum1.textContent = this.value;
                aValue.textContent = this.value;
                updateBits(parseInt(this.value) || 0, bitsA);
            });
            
            operand2.addEventListener('input', function() {
                codeNum2.textContent = this.value;
                bValue.textContent = this.value;
                updateBits(parseInt(this.value) || 0, bitsB);
            });
            
            // 重置按钮
            resetBtn.addEventListener('click', function() {
                operand1.value = 3;
                operand2.value = 5;
                operationType.value = 'and';
                
                codeNum1.textContent = 3;
                codeNum2.textContent = 5;
                codeOp.textContent = '&';
                opValue.textContent = '&';
                aValue.textContent = 3;
                bValue.textContent = 5;
                
                executionDiv.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fa fa-arrow-down mb-2"></i>
                        <p>点击"运行动画"开始演示</p>
                    </div>
                `;
                statusDiv.classList.add('hidden');
                
                // 重置所有代码行高亮
                for (let i = 1; i <= 14; i++) {
                    document.getElementById(`bcode-${i}`).classList.remove('code-line-highlight');
                }
                
                // 重置位显示
                updateBits(3, bitsA);
                updateBits(5, bitsB);
                updateBits(1, bitsResult);
                resultValue.textContent = 1;
            });
            
            // 运行按钮
            runBtn.addEventListener('click', function() {
                runAnimation();
            });
            
            // 更新二进制位显示
            function updateBits(num, container) {
                container.innerHTML = '';
                // 显示8位二进制
                for (let i = 7; i >= 0; i--) {
                    const bit = (num >> i) & 1;
                    const bitDiv = document.createElement('div');
                    bitDiv.className = `bit ${bit ? '' : ''}`;
                    bitDiv.textContent = bit;
                    container.appendChild(bitDiv);
                }
            }
            
            // 运行动画
            async function runAnimation() {
                // 获取操作数和运算符
                const a = parseInt(operand1.value) || 0;
                const b = parseInt(operand2.value) || 0;
                const op = operationType.value;
                
                // 清空执行区域
                executionDiv.innerHTML = '';
                statusDiv.classList.remove('hidden');
                statusDiv.textContent = '状态: 开始执行';
                
                // 重置所有代码行高亮
                for (let i = 1; i <= 14; i++) {
                    document.getElementById(`bcode-${i}`).classList.remove('code-line-highlight');
                }
                
                // 步骤1: 显示变量初始化
                addExecutionStep('初始化变量:');
                addExecutionStep(`int a = ${a} (二进制: ${binaryStr(a)})`);
                addExecutionStep(`int b = ${b} (二进制: ${binaryStr(b)})`);
                await delay(1000);
                
                // 高亮代码行
                document.getElementById('bcode-5').classList.add('code-line-highlight');
                document.getElementById('bcode-6').classList.add('code-line-highlight');
                statusDiv.textContent = '状态: 初始化变量';
                await delay(800);
                
                // 步骤2: 执行位运算
                addExecutionStep(`执行${opMap[op].name}运算: ${a} ${opMap[op].symbol} ${b}`);
                await delay(1000);
                
                // 高亮代码行
                for (let i = 5; i <= 8; i++) {
                    document.getElementById(`bcode-${i}`).classList.remove('code-line-highlight');
                }
                document.getElementById('bcode-9').classList.add('code-line-highlight');
                statusDiv.textContent = '状态: 执行位运算';
                
                // 计算结果
                let result;
                switch(op) {
                    case 'and':
                        result = a & b;
                        await showBitwiseProcess(a, b, result, (x, y) => x & y, '与');
                        break;
                    case 'or':
                        result = a | b;
                        await showBitwiseProcess(a, b, result, (x, y) => x | y, '或');
                        break;
                    case 'xor':
                        result = a ^ b;
                        await showBitwiseProcess(a, b, result, (x, y) => x ^ y, '异或');
                        break;
                    case 'left':
                        result = a << b;
                        await showShiftProcess(a, b, result, true);
                        break;
                    case 'right':
                        result = a >> b;
                        await showShiftProcess(a, b, result, false);
                        break;
                }
                
                // 步骤3: 显示结果
                addExecutionStep(`运算结果: ${result} (二进制: ${binaryStr(result)})`);
                resultValue.textContent = result;
                updateBits(result, bitsResult);
                await delay(1000);
                
                // 高亮代码行
                document.getElementById('bcode-9').classList.remove('code-line-highlight');
                document.getElementById('bcode-11').classList.add('code-line-highlight');
                statusDiv.textContent = '状态: 输出结果';
                await delay(800);
                
                // 完成
                statusDiv.textContent = '状态: 执行完成';
                document.getElementById('bcode-11').classList.remove('code-line-highlight');
            }
            
            // 显示按位运算过程
            async function showBitwiseProcess(a, b, result, opFunc, opName) {
                // 更新位显示
                updateBits(a, bitsA);
                updateBits(b, bitsB);
                
                // 逐位显示运算过程
                for (let i = 7; i >= 0; i--) {
                    const bitA = (a >> i) & 1;
                    const bitB = (b >> i) & 1;
                    const bitResult = opFunc(bitA, bitB);
                    
                    // 高亮当前位
                    bitsA.children[7 - i].classList.add('bit-highlight');
                    bitsB.children[7 - i].classList.add('bit-highlight');
                    
                    addExecutionStep(`第${i}位运算: ${bitA} ${opName} ${bitB} = ${bitResult}`);
                    await delay(600);
                    
                    // 取消高亮
                    bitsA.children[7 - i].classList.remove('bit-highlight');
                    bitsB.children[7 - i].classList.remove('bit-highlight');
                    
                    // 更新结果位
                    const resultBits = bitsResult.children;
                    resultBits[7 - i].textContent = bitResult;
                    resultBits[7 - i].classList.add('bit-highlight');
                    await delay(300);
                    resultBits[7 - i].classList.remove('bit-highlight');
                }
            }
            
            // 显示移位运算过程
            async function showShiftProcess(a, b, result, isLeft) {
                // 更新位显示
                updateBits(a, bitsA);
                
                addExecutionStep(`将 ${a} (${binaryStr(a)}) ${isLeft ? '左' : '右'}移 ${b} 位`);
                await delay(1000);
                
                let current = a;
                for (let i = 1; i <= b; i++) {
                    current = isLeft ? current << 1 : current >> 1;
                    updateBits(current, bitsResult);
                    addExecutionStep(`${isLeft ? '左' : '右'}移第${i}位后: ${current} (${binaryStr(current)})`);
                    await delay(800);
                }
            }
            
            // 添加执行步骤
            function addExecutionStep(text) {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'mb-2 p-2 bg-white rounded border-l-2 border-bitwise';
                stepDiv.textContent = text;
                executionDiv.appendChild(stepDiv);
                executionDiv.scrollTop = executionDiv.scrollHeight;
            }
            
            // 延迟函数
            function delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            // 转换为8位二进制字符串
            function binaryStr(num) {
                return num.toString(2).padStart(8, '0');
            }
            
            // 初始化位显示
            updateBits(3, bitsA);
            updateBits(5, bitsB);
            updateBits(1, bitsResult);
        });
    </script>
</body>
</html>