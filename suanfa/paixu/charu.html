<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>插入排序 - 姚老师信奥网</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/css/font/font-awesome/css/font.font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A80F0', // 主色调：鲜明的蓝色
                        secondary: '#6C63FF', // 辅助色：紫色
                        syntax: '#FF9800', // 语法部分：橙色
                        algorithm: '#2ECC71', // 算法部分：绿色
                        datastructure: '#9C27B0', // 数据结构部分：深紫色
                        darkbg: '#F8FAFC', // 浅灰白背景
                        cardbg: '#FFFFFF', // 卡片背景
                        hoverbg: '#F0F2F5', // 悬停背景
                        insertion: '#E91E63', // 插入排序主题色：粉红色
                        execution: '#FFEB3B', // 执行高亮：黄色
                        sorted: '#4CAF50', // 已排序元素：绿色
                        current: '#2196F3', // 当前元素：蓝色
                    },
                    fontFamily: {
                        mono: ['Consolas', 'Monaco', 'Courier New', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .hover-scale {
                @apply transition-transform duration-300 hover:scale-[1.02];
            }
            .category-bg {
                @apply bg-gradient-to-r from-primary/5 to-primary/10;
            }
            .subcategory-bg {
                @apply bg-gradient-to-r from-secondary/5 to-secondary/10;
            }
            .insertion-bg {
                @apply bg-gradient-to-r from-insertion/5 to-insertion/10;
            }
            .card-shadow {
                @apply shadow-sm hover:shadow-md transition-shadow duration-300;
            }
            .nav-item {
                @apply text-gray-700 hover:text-primary transition-colors duration-200;
            }
            .topic-card {
                @apply bg-cardbg rounded-lg p-5 card-shadow hover-scale;
            }
            .subtopic-item {
                @apply bg-white rounded-md p-3 border border-gray-100 hover:border-primary/50 transition-all duration-200 cursor-pointer;
            }
            .topic-header {
                @apply text-xl font-bold text-primary mb-4 flex items-center;
            }
            .subtopic-header {
                @apply font-semibold text-secondary mb-3;
            }
            .insertion-header {
                @apply font-bold text-insertion mb-3;
            }
            .site-title {
                @apply text-2xl font-bold text-primary tracking-tight;
            }
            .code-block {
                @apply bg-gray-800 text-gray-100 rounded-lg p-4 overflow-x-auto my-4 text-sm font-mono;
            }
            .step-item {
                @apply p-3 rounded-md mb-2 border-l-4 border-insertion bg-insertion/5;
            }
            .step-number {
                @apply inline-block w-6 h-6 rounded-full bg-insertion text-white text-center mr-2 text-xs;
            }
            .array-element {
                @apply inline-block w-12 h-12 flex items-center justify-center rounded-md border-2 mx-1 transition-all duration-300 text-white font-medium;
            }
            .array-element-normal {
                @apply bg-gray-500 border-gray-400;
            }
            .array-element-sorted {
                @apply bg-sorted border-green-600;
            }
            .array-element-current {
                @apply bg-current border-blue-600 scale-125;
            }
            .array-element-compare {
                @apply bg-orange-500 border-orange-600;
            }
            .animation-controls {
                @apply flex flex-wrap gap-2 items-center my-4;
            }
            .animation-step {
                @apply bg-gray-100 p-3 rounded-lg mb-4;
            }
            .animation-progress {
                @apply w-full bg-gray-200 rounded-full h-2.5 mb-2;
            }
            .animation-progress-bar {
                @apply bg-insertion h-2.5 rounded-full transition-all duration-300;
            }
            .animation-status {
                @apply text-sm text-gray-600 my-2 p-2 bg-gray-50 rounded;
            }
            .code-line {
                @apply transition-all duration-300;
            }
            .code-line-highlight {
                @apply bg-execution/30 text-gray-900 font-medium;
            }
        }
    </style>
</head>
<body class="bg-darkbg text-gray-800 font-sans min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fa fa-code text-primary text-3xl"></i>
                <h1 class="site-title">姚老师信奥网</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" class="nav-item">首页</a>
                <a href="#" class="nav-item">课程</a>
                <a href="#" class="nav-item">题库</a>
                <a href="#" class="nav-item">关于我们</a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- 搜索框 -->
                <div class="relative hidden md:block">
                    <input type="text" id="search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-64">
                    <button id="search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
                <div class="md:hidden">
                    <button class="text-gray-700">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移动端搜索框 -->
        <div class="md:hidden px-4 pb-3">
            <div class="relative">
                <input type="text" id="mobile-search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-full">
                <button id="mobile-search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 面包屑导航 -->
    <div class="bg-white border-b border-gray-200 py-2">
        <div class="container mx-auto px-4">
            <nav class="flex text-sm" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="#" class="text-gray-600 hover:text-primary">
                            <i class="fa fa-home mr-1"></i>首页
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">算法基础</a>
                        </div>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">排序算法</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <span class="text-insertion font-medium">插入排序</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 页面标题 -->
        <div class="insertion-bg rounded-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row md:items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-insertion mb-2">插入排序</h1>
                    <p class="text-gray-700">
                        插入排序是一种简单直观的排序算法，它的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。
                        本页面将详细讲解插入排序的原理、实现及时间复杂度分析，帮助NOIP竞赛学生掌握这一基础排序算法。
                    </p>
                </div>
                <div class="mt-4 md:mt-0">
                    <div class="flex space-x-3">
                        <a href="#concept" class="bg-insertion hover:bg-insertion/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-book mr-2"></i> 学习概念
                        </a>
                        <a href="#problems" class="bg-white border border-insertion text-insertion hover:bg-insertion/5 px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-list-alt mr-2"></i> 查看题目
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 插入排序概述 -->
        <section id="concept" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-insertion mb-6 flex items-center">
                <i class="fa fa-info-circle mr-2"></i> 插入排序概述
            </h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold mb-3">什么是插入排序？</h3>
                    <p class="text-gray-700">
                        插入排序（Insertion Sort）是一种简单的排序算法，它的工作方式类似于我们整理手中的扑克牌。
                        算法将数组分为已排序和未排序两部分，每次从未排序部分中取出一个元素，插入到已排序部分的合适位置，直到整个数组有序。
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg mt-3">
                        <h4 class="font-semibold mb-2">插入排序的主要特点：</h4>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>实现简单，易于理解</li>
                            <li>稳定排序算法（相等元素的相对位置不变）</li>
                            <li>原地排序（只需要常数级别的额外空间）</li>
                            <li>适用于小规模数据或基本有序的数据</li>
                            <li>时间复杂度：O(n²)，空间复杂度：O(1)</li>
                        </ul>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-3">插入排序的基本步骤</h3>
                    <div class="space-y-3">
                        <div class="step-item">
                            <span class="step-number">1</span>
                            <span>将数组的第一个元素视为已排序部分，其余元素视为未排序部分</span>
                        </div>
                        <div class="step-item">
                            <span class="step-number">2</span>
                            <span>从第二个元素开始，取出未排序部分的第一个元素作为待插入元素</span>
                        </div>
                        <div class="step-item">
                            <span class="step-number">3</span>
                            <span>在已排序部分中，从后向前扫描，找到待插入元素的合适位置</span>
                        </div>
                        <div class="step-item">
                            <span class="step-number">4</span>
                            <span>将待插入元素插入到找到的位置，已排序部分长度增加1</span>
                        </div>
                        <div class="step-item">
                            <span class="step-number">5</span>
                            <span>重复步骤2-4，直到所有元素都被插入到已排序部分</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 插入排序动画演示 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-insertion mb-6 flex items-center">
                <i class="fa fa-play-circle mr-2"></i> 插入排序过程演示
            </h2>
            
            <div class="space-y-6">
                <!-- 排序动画 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">插入排序执行过程动态演示</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <p class="text-gray-700 mb-4">
                                下面的动画展示了插入排序的完整过程，包括元素的比较、移动和插入操作。
                                可以自定义输入数组或使用随机数组进行演示。
                            </p>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">输入数组元素 (用逗号分隔):</label>
                                <input type="text" id="array-input" value="5,3,8,4,2"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-insertion">
                            </div>
                            
                            <div class="flex space-x-2 mb-4">
                                <button id="random-array" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md transition-all flex items-center text-sm">
                                    <i class="fa fa-random mr-1"></i> 随机数组
                                </button>
                                <button id="reset-array" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md transition-all flex items-center text-sm">
                                    <i class="fa fa-refresh mr-1"></i> 重置
                                </button>
                            </div>
                            
                            <div class="flex space-x-2 mb-4">
                                <button id="sort-run" class="bg-insertion hover:bg-insertion/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-play mr-2"></i> 开始排序
                                </button>
                                <button id="sort-pause" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md transition-all flex items-center hidden">
                                    <i class="fa fa-pause mr-2"></i> 暂停
                                </button>
                                <button id="sort-step" class="bg-white border border-insertion text-insertion hover:bg-insertion/5 px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-step-forward mr-2"></i> 单步执行
                                </button>
                            </div>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">动画速度:</label>
                                <input type="range" id="animation-speed" min="100" max="2000" value="800" step="100"
                                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-insertion">
                            </div>
                            
                            <div id="sort-status" class="animation-status">
                                状态: 准备就绪
                            </div>
                            
                            <div class="animation-progress">
                                <div id="sort-progress-bar" class="animation-progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 h-64 flex items-center justify-center" id="array-visualization">
                                <!-- 数组可视化将在这里动态生成 -->
                            </div>
                            <div id="step-explanation" class="mt-4 p-3 bg-gray-50 rounded-lg text-sm text-gray-700">
                                请点击"开始排序"或"单步执行"查看排序过程
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-gray-800 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto font-mono text-sm" id="sort-code">
                                <div class="code-line" id="code-1">// 插入排序实现</div>
                                <div class="code-line" id="code-2">void insertionSort(int arr[], int n) {</div>
                                <div class="code-line" id="code-3">&nbsp;&nbsp;int i, key, j;</div>
                                <div class="code-line" id="code-4">&nbsp;&nbsp;</div>
                                <div class="code-line" id="code-5">&nbsp;&nbsp;// 从第二个元素开始遍历</div>
                                <div class="code-line" id="code-6">&nbsp;&nbsp;for (i = 1; i < n; i++) {</div>
                                <div class="code-line" id="code-7">&nbsp;&nbsp;&nbsp;&nbsp;key = arr[i]; // 当前待插入元素</div>
                                <div class="code-line" id="code-8">&nbsp;&nbsp;&nbsp;&nbsp;j = i - 1; // 已排序部分的最后一个元素索引</div>
                                <div class="code-line" id="code-9">&nbsp;&nbsp;</div>
                                <div class="code-line" id="code-10">&nbsp;&nbsp;&nbsp;&nbsp;// 在已排序部分寻找插入位置</div>
                                <div class="code-line" id="code-11">&nbsp;&nbsp;&nbsp;&nbsp;while (j >= 0 && arr[j] > key) {</div>
                                <div class="code-line" id="code-12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arr[j + 1] = arr[j]; // 元素后移</div>
                                <div class="code-line" id="code-13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j--;</div>
                                <div class="code-line" id="code-14">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                                <div class="code-line" id="code-15">&nbsp;&nbsp;</div>
                                <div class="code-line" id="code-16">&nbsp;&nbsp;&nbsp;&nbsp;arr[j + 1] = key; // 插入元素</div>
                                <div class="code-line" id="code-17">&nbsp;&nbsp;}</div>
                                <div class="code-line" id="code-18">}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 插入排序实现与优化 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-insertion mb-6 flex items-center">
                <i class="fa fa-code mr-2"></i> 插入排序实现与优化
            </h2>
            
            <div class="space-y-6">
                <!-- 基础实现 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">1. 基础插入排序实现</h3>
                    <p class="text-gray-700 mb-3">
                        标准的插入排序实现，适用于大多数基本排序场景
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
using namespace std;

// 插入排序函数
void insertionSort(int arr[], int n) {
    int i, key, j;
    // 从第二个元素开始遍历
    for (i = 1; i < n; i++) {
        key = arr[i];  // 当前待插入元素
        j = i - 1;     // 已排序部分的最后一个元素索引
        
        // 在已排序部分寻找插入位置
        while (j >= 0 && arr[j] > key) {
            arr[j + 1] = arr[j];  // 元素后移
            j--;
        }
        arr[j + 1] = key;  // 插入元素
    }
}

// 打印数组
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

int main() {
    int arr[] = {5, 3, 8, 4, 2};
    int n = sizeof(arr) / sizeof(arr[0]);
    
    cout << "排序前: ";
    printArray(arr, n);
    
    insertionSort(arr, n);
    
    cout << "排序后: ";
    printArray(arr, n);
    
    return 0;
}</code></pre>
                </div>
                
                <!-- 优化版本 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">2. 优化版本 - 二分查找插入排序</h3>
                    <p class="text-gray-700 mb-3">
                        利用二分查找优化插入位置的查找过程，将比较次数从O(n)降至O(log n)
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
using namespace std;

// 二分查找找到插入位置
int binarySearch(int arr[], int key, int low, int high) {
    if (high <= low) {
        return (key > arr[low]) ? (low + 1) : low;
    }
    
    int mid = (low + high) / 2;
    
    if (key == arr[mid]) {
        return mid + 1;
    }
    
    if (key > arr[mid]) {
        return binarySearch(arr, key, mid + 1, high);
    }
    return binarySearch(arr, key, low, mid - 1);
}

// 二分插入排序
void binaryInsertionSort(int arr[], int n) {
    int i, j, key, pos;
    
    for (i = 1; i < n; i++) {
        j = i - 1;
        key = arr[i];
        
        // 使用二分查找找到插入位置
        pos = binarySearch(arr, key, 0, j);
        
        // 移动元素
        while (j >= pos) {
            arr[j + 1] = arr[j];
            j--;
        }
        arr[j + 1] = key;
    }
}

// 打印数组
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

int main() {
    int arr[] = {5, 3, 8, 4, 2};
    int n = sizeof(arr) / sizeof(arr[0]);
    
    cout << "排序前: ";
    printArray(arr, n);
    
    binaryInsertionSort(arr, n);
    
    cout << "排序后: ";
    printArray(arr, n);
    
    return 0;
}</code></pre>
                </div>
                
                <!-- 性能分析 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">3. 插入排序性能分析</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <h4 class="font-semibold text-insertion mb-2">时间复杂度</h4>
                            <ul class="text-gray-700 text-sm space-y-2">
                                <li><strong>最好情况：</strong>O(n)（数组已排序）</li>
                                <li><strong>最坏情况：</strong>O(n²)（数组逆序）</li>
                                <li><strong>平均情况：</strong>O(n²)</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <h4 class="font-semibold text-insertion mb-2">空间复杂度</h4>
                            <ul class="text-gray-700 text-sm space-y-2">
                                <li><strong>额外空间：</strong>O(1)</li>
                                <li>属于原地排序算法，只需一个临时变量存储待插入元素</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <h4 class="font-semibold text-insertion mb-2">适用场景</h4>
                            <ul class="text-gray-700 text-sm space-y-2">
                                <li>小规模数据排序</li>
                                <li>基本有序的数据</li>
                                <li>作为高级排序算法的子过程（如归并排序、快速排序）</li>
                                <li>在线排序（边接收数据边排序）</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 洛谷推荐题目 -->
        <section id="problems" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-insertion mb-6 flex items-center">
                <i class="fa fa-trophy mr-2"></i> 洛谷推荐练习题目
            </h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-semibold mb-4">模板题（直接应用插入排序）</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold text-primary">P1177 【模板】排序</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">入门</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                对给定的n个整数进行排序并输出，直接应用插入排序算法即可完成。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1177" target="_blank" class="text-sm text-primary hover:text-primary/80 flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold text-primary">P5713 【深基3.例5】洛谷团队系统</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">入门</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                简单的排序问题，适合初学者练习插入排序的基本应用。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P5713" target="_blank" class="text-sm text-primary hover:text-primary/80 flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-4">入门题（插入排序应用）</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold text-primary">P1093 奖学金</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                需要按照多关键字排序，可使用插入排序实现多条件比较。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1093" target="_blank" class="text-sm text-primary hover:text-primary/80 flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold text-primary">P1781 宇宙总统</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                对大数字进行排序，需要自定义比较函数，适合练习插入排序的变体。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1781" target="_blank" class="text-sm text-primary hover:text-primary/80 flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-4">进阶题（插入排序优化与应用）</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold text-primary">P1138 第k小整数</h4>
                                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">普及/提高-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                寻找第k小的整数，可结合插入排序思想优化部分排序过程。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1138" target="_blank" class="text-sm text-primary hover:text-primary/80 flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold text-primary">P2141 珠心算测验</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                需要先排序再进行查找，可使用插入排序并结合二分查找优化。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P2141" target="_blank" class="text-sm text-primary hover:text-primary/80 flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // 初始化代码高亮
        document.addEventListener('DOMContentLoaded', function() {
            hljs.highlightAll();
            initSortAnimation();
        });

        // 插入排序动画演示逻辑
        function initSortAnimation() {
            // 获取DOM元素
            const arrayInput = document.getElementById('array-input');
            const randomArrayBtn = document.getElementById('random-array');
            const resetArrayBtn = document.getElementById('reset-array');
            const sortRunBtn = document.getElementById('sort-run');
            const sortPauseBtn = document.getElementById('sort-pause');
            const sortStepBtn = document.getElementById('sort-step');
            const animationSpeed = document.getElementById('animation-speed');
            const sortStatus = document.getElementById('sort-status');
            const sortProgressBar = document.getElementById('sort-progress-bar');
            const arrayVisualization = document.getElementById('array-visualization');
            const stepExplanation = document.getElementById('step-explanation');
            
            // 代码行元素
            const codeLines = {
                line6: document.getElementById('code-6'),
                line7: document.getElementById('code-7'),
                line8: document.getElementById('code-8'),
                line11: document.getElementById('code-11'),
                line12: document.getElementById('code-12'),
                line13: document.getElementById('code-13'),
                line16: document.getElementById('code-16')
            };
            
            // 排序状态变量
            let originalArray = [5, 3, 8, 4, 2];
            let currentArray = [...originalArray];
            let animationId = null;
            let isPaused = false;
            let isSorting = false;
            let sortStep = 0;
            let i = 1;
            let j = 0;
            let key = 0;
            let n = originalArray.length;
            
            // 初始化数组显示
            renderArray();
            
            // 生成随机数组
            randomArrayBtn.addEventListener('click', function() {
                const size = Math.floor(Math.random() * 5) + 5; // 5-9个元素
                const newArray = [];
                for (let k = 0; k < size; k++) {
                    newArray.push(Math.floor(Math.random() * 90) + 10); // 10-99的随机数
                }
                arrayInput.value = newArray.join(',');
                resetArray();
            });
            
            // 重置数组
            resetArrayBtn.addEventListener('click', resetArray);
            
            function resetArray() {
                // 停止当前动画
                if (animationId) {
                    clearTimeout(animationId);
                    animationId = null;
                }
                
                // 解析输入的数组
                try {
                    const inputValue = arrayInput.value.trim();
                    if (inputValue === '') {
                        originalArray = [5, 3, 8, 4, 2];
                    } else {
                        originalArray = inputValue.split(',').map(num => parseInt(num.trim()));
                        // 验证数组有效性
                        if (originalArray.some(isNaN) || originalArray.length < 2) {
                            throw new Error('无效的数组');
                        }
                    }
                } catch (e) {
                    alert('请输入有效的数组，用逗号分隔数字');
                    return;
                }
                
                // 重置排序状态
                currentArray = [...originalArray];
                isSorting = false;
                isPaused = false;
                sortStep = 0;
                i = 1;
                j = 0;
                key = 0;
                n = originalArray.length;
                
                // 更新UI
                sortRunBtn.classList.remove('hidden');
                sortPauseBtn.classList.add('hidden');
                sortStatus.textContent = '状态: 准备就绪';
                sortProgressBar.style.width = '0%';
                stepExplanation.textContent = '请点击"开始排序"或"单步执行"查看排序过程';
                
                // 清除代码高亮
                Object.values(codeLines).forEach(line => {
                    line.classList.remove('code-line-highlight');
                });
                
                // 重新渲染数组
                renderArray();
            }
            
            // 开始排序
            sortRunBtn.addEventListener('click', startSorting);
            
            // 暂停排序
            sortPauseBtn.addEventListener('click', pauseSorting);
            
            // 单步执行
            sortStepBtn.addEventListener('click', stepSorting);
            
            function startSorting() {
                if (isSorting && !isPaused) return;
                
                isSorting = true;
                isPaused = false;
                sortRunBtn.classList.add('hidden');
                sortPauseBtn.classList.remove('hidden');
                
                if (i >= n) {
                    completeSorting();
                    return;
                }
                
                continueSorting();
            }
            
            function pauseSorting() {
                if (!isSorting || isPaused) return;
                
                isPaused = true;
                if (animationId) {
                    clearTimeout(animationId);
                    animationId = null;
                }
                sortRunBtn.classList.remove('hidden');
                sortPauseBtn.classList.add('hidden');
                sortStatus.textContent = '状态: 已暂停';
            }
            
            function stepSorting() {
                if (isSorting && !isPaused) return;
                
                isSorting = true;
                isPaused = true;
                sortRunBtn.classList.remove('hidden');
                sortPauseBtn.classList.add('hidden');
                
                if (i >= n) {
                    completeSorting();
                    return;
                }
                
                executeOneStep();
            }
            
            function continueSorting() {
                if (!isSorting || isPaused) return;
                
                executeOneStep();
                
                if (i < n) {
                    const speed = 2100 - animationSpeed.value; // 反转速度值，使滑块右侧更快
                    animationId = setTimeout(continueSorting, speed);
                } else {
                    completeSorting();
                }
            }
            
            function executeOneStep() {
                // 第一步：初始化key和j
                if (sortStep === 0) {
                    key = currentArray[i];
                    j = i - 1;
                    
                    sortStatus.textContent = `状态: 处理元素 ${key} (i=${i})`;
                    stepExplanation.textContent = `取出第${i+1}个元素${key}作为待插入元素`;
                    
                    // 高亮代码行
                    highlightCodeLines(['line6', 'line7', 'line8']);
                    
                    sortStep = 1;
                } 
                // 第二步：比较并移动元素
                else if (sortStep === 1) {
                    if (j >= 0 && currentArray[j] > key) {
                        // 需要移动元素
                        currentArray[j + 1] = currentArray[j];
                        
                        sortStatus.textContent = `状态: 移动元素 ${currentArray[j]} (j=${j})`;
                        stepExplanation.textContent = `元素${currentArray[j]}大于${key}，向后移动`;
                        
                        // 高亮代码行
                        highlightCodeLines(['line11', 'line12']);
                        
                        j--;
                    } else {
                        // 找到插入位置
                        sortStep = 2;
                        
                        sortStatus.textContent = `状态: 找到插入位置 (j+1=${j+1})`;
                        stepExplanation.textContent = `找到插入位置，准备插入元素${key}`;
                        
                        // 高亮代码行
                        highlightCodeLines(['line11']);
                    }
                } 
                // 第三步：插入元素
                else if (sortStep === 2) {
                    currentArray[j + 1] = key;
                    
                    sortStatus.textContent = `状态: 插入元素 ${key} (位置${j+1})`;
                    stepExplanation.textContent = `将元素${key}插入到位置${j+1}`;
                    
                    // 高亮代码行
                    highlightCodeLines(['line16']);
                    
                    // 准备下一轮
                    i++;
                    sortStep = 0;
                    
                    // 更新进度
                    const progress = (i / n) * 100;
                    sortProgressBar.style.width = `${progress}%`;
                }
                
                // 重新渲染数组
                renderArray();
            }
            
            function completeSorting() {
                isSorting = false;
                sortRunBtn.classList.remove('hidden');
                sortPauseBtn.classList.add('hidden');
                sortStatus.textContent = '状态: 排序完成';
                stepExplanation.textContent = '插入排序已完成，数组已按升序排列';
                
                // 清除代码高亮
                Object.values(codeLines).forEach(line => {
                    line.classList.remove('code-line-highlight');
                });
                
                // 更新进度
                sortProgressBar.style.width = '100%';
            }
            
            function highlightCodeLines(lineNames) {
                // 先清除所有高亮
                Object.values(codeLines).forEach(line => {
                    line.classList.remove('code-line-highlight');
                });
                
                // 高亮指定行
                lineNames.forEach(name => {
                    if (codeLines[name]) {
                        codeLines[name].classList.add('code-line-highlight');
                    }
                });
            }
            
            function renderArray() {
                arrayVisualization.innerHTML = '';
                
                currentArray.forEach((value, index) => {
                    const element = document.createElement('div');
                    element.className = 'array-element array-element-normal';
                    element.textContent = value;
                    
                    // 标记已排序元素
                    if (index < i) {
                        // 当前元素是已排序部分，但排除正在处理的位置
                        if (!(sortStep === 1 && index === j + 1)) {
                            element.classList.remove('array-element-normal');
                            element.classList.add('array-element-sorted');
                        }
                    }
                    
                    // 标记当前待插入元素
                    if (sortStep > 0 && index === i) {
                        element.classList.remove('array-element-normal', 'array-element-sorted');
                        element.classList.add('array-element-current');
                    }
                    
                    // 标记正在比较的元素
                    if (sortStep === 1 && index === j) {
                        element.classList.remove('array-element-normal', 'array-element-sorted');
                        element.classList.add('array-element-compare');
                    }
                    
                    arrayVisualization.appendChild(element);
                });
            }
        }
    </script>
</body>
</html>