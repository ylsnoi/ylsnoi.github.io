<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>最长公共子序列 - 姚老师信奥网</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A80F0', // 主色调：鲜明的蓝色
                        secondary: '#6C63FF', // 辅助色：紫色
                        syntax: '#FF9800', // 语法部分：橙色
                        algorithm: '#2ECC71', // 算法部分：绿色
                        datastructure: '#9C27B0', // 数据结构部分：深紫色
                        darkbg: '#F8FAFC', // 浅灰白背景
                        cardbg: '#FFFFFF', // 卡片背景
                        hoverbg: '#F0F2F5', // 悬停背景
                        lcs: '#E91E63', // LCS主题色：粉红色
                        execution: '#FFEB3B', // 执行高亮：黄色
                    },
                    fontFamily: {
                        mono: ['Consolas', 'Monaco', 'Courier New', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .hover-scale {
                @apply transition-transform duration-300 hover:scale-[1.02];
            }
            .category-bg {
                @apply bg-gradient-to-r from-primary/5 to-primary/10;
            }
            .subcategory-bg {
                @apply bg-gradient-to-r from-secondary/5 to-secondary/10;
            }
            .lcs-bg {
                @apply bg-gradient-to-r from-lcs/5 to-lcs/10;
            }
            .card-shadow {
                @apply shadow-sm hover:shadow-md transition-shadow duration-300;
            }
            .nav-item {
                @apply text-gray-700 hover:text-primary transition-colors duration-200;
            }
            .topic-card {
                @apply bg-cardbg rounded-lg p-5 card-shadow hover-scale;
            }
            .subtopic-item {
                @apply bg-white rounded-md p-3 border border-gray-100 hover:border-primary/50 transition-all duration-200 cursor-pointer;
            }
            .topic-header {
                @apply text-xl font-bold text-primary mb-4 flex items-center;
            }
            .subtopic-header {
                @apply font-semibold text-secondary mb-3;
            }
            .lcs-header {
                @apply font-bold text-lcs mb-3;
            }
            .site-title {
                @apply text-2xl font-bold text-primary tracking-tight;
            }
            .code-block {
                @apply bg-gray-800 text-gray-100 rounded-lg p-4 overflow-x-auto my-4 text-sm font-mono;
            }
            .step-item {
                @apply p-3 rounded-md mb-2 border-l-4 border-lcs bg-lcs/5;
            }
            .step-number {
                @apply inline-block w-6 h-6 rounded-full bg-lcs text-white text-center mr-2 text-xs;
            }
            .table-cell {
                @apply border border-gray-300 p-2 text-center;
            }
            .table-cell-highlight {
                @apply bg-lcs/20 font-bold;
            }
            .table-cell-current {
                @apply bg-execution/30 border-lcs border-2;
            }
            .animation-controls {
                @apply flex flex-wrap gap-2 items-center my-4;
            }
            .animation-step {
                @apply bg-gray-100 p-3 rounded-lg mb-4;
            }
            .animation-progress {
                @apply w-full bg-gray-200 rounded-full h-2.5 mb-2;
            }
            .animation-progress-bar {
                @apply bg-lcs h-2.5 rounded-full transition-all duration-300;
            }
            .animation-status {
                @apply text-sm text-gray-600 my-2 p-2 bg-gray-50 rounded;
            }
            .code-line {
                @apply transition-all duration-300;
            }
            .code-line-highlight {
                @apply bg-execution/30 text-gray-900 font-medium;
            }
            .sequence-item {
                @apply inline-block w-8 h-8 rounded-md bg-gray-100 text-center leading-8 mx-1;
            }
            .sequence-item-match {
                @apply bg-lcs text-white;
            }
            .sequence-item-current {
                @apply border-2 border-execution;
            }
        }
    </style>
</head>
<body class="bg-darkbg text-gray-800 font-sans min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fa fa-code text-primary text-3xl"></i>
                <h1 class="site-title">姚老师信奥网</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" class="nav-item">首页</a>
                <a href="#" class="nav-item">课程</a>
                <a href="#" class="nav-item">题库</a>
                <a href="#" class="nav-item">关于我们</a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- 搜索框 -->
                <div class="relative hidden md:block">
                    <input type="text" id="search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-64">
                    <button id="search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
                <div class="md:hidden">
                    <button class="text-gray-700">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移动端搜索框 -->
        <div class="md:hidden px-4 pb-3">
            <div class="relative">
                <input type="text" id="mobile-search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-full">
                <button id="mobile-search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 面包屑导航 -->
    <div class="bg-white border-b border-gray-200 py-2">
        <div class="container mx-auto px-4">
            <nav class="flex text-sm" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="#" class="text-gray-600 hover:text-primary">
                            <i class="fa fa-home mr-1"></i>首页
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">动态规划</a>
                        </div>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">字符串处理</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <span class="text-lcs font-medium">最长公共子序列</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 页面标题 -->
        <div class="lcs-bg rounded-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row md:items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-lcs mb-2">最长公共子序列 (LCS)</h1>
                    <p class="text-gray-700">
                        最长公共子序列是动态规划的经典应用，用于求解两个序列中最长的公共子序列长度。本页面将详细讲解LCS的动态规划解法，
                        帮助NOIP竞赛学生掌握这一重要算法。
                    </p>
                </div>
                <div class="mt-4 md:mt-0">
                    <div class="flex space-x-3">
                        <a href="#concept" class="bg-lcs hover:bg-lcs/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-book mr-2"></i> 学习概念
                        </a>
                        <a href="#problems" class="bg-white border border-lcs text-lcs hover:bg-lcs/5 px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-list-alt mr-2"></i> 查看题目
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- LCS概念 -->
        <section id="concept" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-lcs mb-6 flex items-center">
                <i class="fa fa-info-circle mr-2"></i> 最长公共子序列概述
            </h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold mb-3">什么是最长公共子序列？</h3>
                    <p class="text-gray-700">
                        子序列是指从一个序列中删除若干元素（可能不删除）后，剩余元素保持原有相对顺序组成的新序列。
                        最长公共子序列（Longest Common Subsequence，简称LCS）问题是求两个序列中长度最长的公共子序列。
                    </p>
                    
                    <div class="bg-gray-50 p-4 rounded-lg mt-3">
                        <h4 class="font-semibold mb-2">示例：</h4>
                        <p class="mb-2">序列1：ABCBDAB</p>
                        <p class="mb-2">序列2：BDCAB</p>
                        <p>最长公共子序列：BCAB 或 BDAB，长度为4</p>
                        
                        <div class="mt-4 p-3 bg-white rounded border border-gray-200">
                            <div class="flex flex-wrap items-center justify-center mb-4">
                                <div class="sequence-item">A</div>
                                <div class="sequence-item sequence-item-match">B</div>
                                <div class="sequence-item sequence-item-match">C</div>
                                <div class="sequence-item">B</div>
                                <div class="sequence-item">D</div>
                                <div class="sequence-item sequence-item-match">A</div>
                                <div class="sequence-item sequence-item-match">B</div>
                            </div>
                            <div class="flex flex-wrap items-center justify-center">
                                <div class="sequence-item sequence-item-match">B</div>
                                <div class="sequence-item">D</div>
                                <div class="sequence-item sequence-item-match">C</div>
                                <div class="sequence-item sequence-item-match">A</div>
                                <div class="sequence-item sequence-item-match">B</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-3">LCS的动态规划解法</h3>
                    <p class="text-gray-700 mb-3">
                        LCS问题可以使用动态规划高效解决，其核心思想是将问题分解为子问题，通过求解子问题的解来构建原问题的解。
                    </p>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-lcs mb-2">动态规划状态定义</h4>
                        <p class="mb-2">设 <code class="bg-gray-200 px-1 rounded">dp[i][j]</code> 表示序列 <code class="bg-gray-200 px-1 rounded">s1[0..i-1]</code> 和 <code class="bg-gray-200 px-1 rounded">s2[0..j-1]</code> 的最长公共子序列长度。</p>
                        
                        <h4 class="font-semibold text-lcs mb-2 mt-4">状态转移方程</h4>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>如果 <code class="bg-gray-200 px-1 rounded">s1[i-1] == s2[j-1]</code>，则 <code class="bg-gray-200 px-1 rounded">dp[i][j] = dp[i-1][j-1] + 1</code></li>
                            <li>否则，<code class="bg-gray-200 px-1 rounded">dp[i][j] = max(dp[i-1][j], dp[i][j-1])</code></li>
                        </ul>
                        
                        <h4 class="font-semibold text-lcs mb-2 mt-4">边界条件</h4>
                        <p>当 <code class="bg-gray-200 px-1 rounded">i=0</code> 或 <code class="bg-gray-200 px-1 rounded">j=0</code> 时，<code class="bg-gray-200 px-1 rounded">dp[i][j] = 0</code>（空序列的LCS长度为0）</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- LCS算法演示 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-lcs mb-6 flex items-center">
                <i class="fa fa-play-circle mr-2"></i> LCS算法执行过程演示
            </h2>
            
            <div class="space-y-6">
                <!-- LCS动画演示 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">LCS动态规划算法执行过程</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <p class="text-gray-700 mb-4">
                                下面的动画展示了LCS动态规划算法的完整执行过程，包括状态表的构建和最长公共子序列的回溯求解。
                            </p>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">输入两个字符串:</label>
                                <div class="space-y-3">
                                    <div>
                                        <input type="text" id="str1" value="ABCBDAB" 
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-lcs">
                                    </div>
                                    <div>
                                        <input type="text" id="str2" value="BDCAB" 
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-lcs">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex flex-wrap gap-2 mb-4">
                                <button id="lcs-run" class="bg-lcs hover:bg-lcs/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-play mr-2"></i> 运行动画
                                </button>
                                <button id="lcs-step" class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-step-forward mr-2"></i> 单步执行
                                </button>
                                <button id="lcs-reset" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-refresh mr-2"></i> 重置
                                </button>
                            </div>
                            
                            <div id="lcs-status" class="animation-status">
                                状态: 等待开始
                            </div>
                            
                            <div class="mt-4">
                                <h4 class="font-semibold text-sm mb-2">LCS结果:</h4>
                                <div id="lcs-result" class="bg-white p-3 rounded border border-gray-200 min-h-[60px] text-center text-gray-500">
                                    等待计算...
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 h-96 overflow-y-auto" id="lcs-execution">
                                <div class="text-center text-gray-500 py-16">
                                    <i class="fa fa-arrow-down mb-2"></i>
                                    <p>点击"运行动画"开始演示</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 h-96 overflow-y-auto" id="lcs-table">
                                <div class="text-center text-gray-500 py-16">
                                    <i class="fa fa-table mb-2"></i>
                                    <p>动态规划表将在这里显示</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- LCS代码实现 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">LCS算法代码实现</h3>
                    <div class="bg-gray-800 text-gray-100 rounded-lg p-4 overflow-x-auto font-mono text-sm" id="lcs-code">
                        <div class="code-line" id="lcs-code-1">#include &lt;iostream&gt;</div>
                        <div class="code-line" id="lcs-code-2">#include &lt;string&gt;</div>
                        <div class="code-line" id="lcs-code-3">#include &lt;vector&gt;</div>
                        <div class="code-line" id="lcs-code-4">#include &lt;algorithm&gt;</div>
                        <div class="code-line" id="lcs-code-5">using namespace std;</div>
                        <div class="code-line" id="lcs-code-6">&nbsp;</div>
                        <div class="code-line" id="lcs-code-7">// 计算LCS长度并返回LCS字符串</div>
                        <div class="code-line" id="lcs-code-8">string lcs(string s1, string s2) {</div>
                        <div class="code-line" id="lcs-code-9">&nbsp;&nbsp;int m = s1.size();</div>
                        <div class="code-line" id="lcs-code-10">&nbsp;&nbsp;int n = s2.size();</div>
                        <div class="code-line" id="lcs-code-11">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-12">&nbsp;&nbsp;// 创建DP表</div>
                        <div class="code-line" id="lcs-code-13">&nbsp;&nbsp;vector&lt;vector&lt;int&gt;&gt; dp(m+1, vector&lt;int&gt;(n+1, 0));</div>
                        <div class="code-line" id="lcs-code-14">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-15">&nbsp;&nbsp;// 填充DP表</div>
                        <div class="code-line" id="lcs-code-16">&nbsp;&nbsp;for (int i = 1; i <= m; i++) {</div>
                        <div class="code-line" id="lcs-code-17">&nbsp;&nbsp;&nbsp;&nbsp;for (int j = 1; j <= n; j++) {</div>
                        <div class="code-line" id="lcs-code-18">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (s1[i-1] == s2[j-1]) {</div>
                        <div class="code-line" id="lcs-code-19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j] = dp[i-1][j-1] + 1;</div>
                        <div class="code-line" id="lcs-code-20">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</div>
                        <div class="code-line" id="lcs-code-21">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j] = max(dp[i-1][j], dp[i][j-1]);</div>
                        <div class="code-line" id="lcs-code-22">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                        <div class="code-line" id="lcs-code-23">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                        <div class="code-line" id="lcs-code-24">&nbsp;&nbsp;}</div>
                        <div class="code-line" id="lcs-code-25">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-26">&nbsp;&nbsp;// 回溯查找LCS</div>
                        <div class="code-line" id="lcs-code-27">&nbsp;&nbsp;int i = m, j = n;</div>
                        <div class="code-line" id="lcs-code-28">&nbsp;&nbsp;string result;</div>
                        <div class="code-line" id="lcs-code-29">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-30">&nbsp;&nbsp;while (i > 0 && j > 0) {</div>
                        <div class="code-line" id="lcs-code-31">&nbsp;&nbsp;&nbsp;&nbsp;if (s1[i-1] == s2[j-1]) {</div>
                        <div class="code-line" id="lcs-code-32">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = s1[i-1] + result;</div>
                        <div class="code-line" id="lcs-code-33">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i--;</div>
                        <div class="code-line" id="lcs-code-34">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j--;</div>
                        <div class="code-line" id="lcs-code-35">&nbsp;&nbsp;&nbsp;&nbsp;} else if (dp[i-1][j] > dp[i][j-1]) {</div>
                        <div class="code-line" id="lcs-code-36">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i--;</div>
                        <div class="code-line" id="lcs-code-37">&nbsp;&nbsp;&nbsp;&nbsp;} else {</div>
                        <div class="code-line" id="lcs-code-38">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;j--;</div>
                        <div class="code-line" id="lcs-code-39">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                        <div class="code-line" id="lcs-code-40">&nbsp;&nbsp;}</div>
                        <div class="code-line" id="lcs-code-41">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-42">&nbsp;&nbsp;return result;</div>
                        <div class="code-line" id="lcs-code-43">}</div>
                        <div class="code-line" id="lcs-code-44">&nbsp;</div>
                        <div class="code-line" id="lcs-code-45">int main() {</div>
                        <div class="code-line" id="lcs-code-46">&nbsp;&nbsp;string s1, s2;</div>
                        <div class="code-line" id="lcs-code-47">&nbsp;&nbsp;cin >> s1 >> s2;</div>
                        <div class="code-line" id="lcs-code-48">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-49">&nbsp;&nbsp;string result = lcs(s1, s2);</div>
                        <div class="code-line" id="lcs-code-50">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-51">&nbsp;&nbsp;cout << "最长公共子序列: " << result << endl;</div>
                        <div class="code-line" id="lcs-code-52">&nbsp;&nbsp;cout << "长度: " << result.size() << endl;</div>
                        <div class="code-line" id="lcs-code-53">&nbsp;&nbsp;</div>
                        <div class="code-line" id="lcs-code-54">&nbsp;&nbsp;return 0;</div>
                        <div class="code-line" id="lcs-code-55">}</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- LCS优化与变种 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-lcs mb-6 flex items-center">
                <i class="fa fa-cogs mr-2"></i> LCS的优化与变种
            </h2>
            
            <div class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-3">空间优化</h3>
                        <p class="text-gray-700 mb-3">
                            标准LCS算法使用O(m×n)的空间，通过观察可以发现，计算第i行只需要第i-1行的数据，因此可以将空间优化到O(min(m,n))。
                        </p>
                        <pre class="code-block text-xs"><code class="language-cpp">// 空间优化版本的LCS长度计算
int lcsLength(string s1, string s2) {
    int m = s1.size(), n = s2.size();
    // 确保使用较小的空间
    if (m < n) return lcsLength(s2, s1);
    
    vector<int> prev(n+1, 0);
    vector<int> curr(n+1, 0);
    
    for (int i = 1; i <= m; i++) {
        for (int j = 1; j <= n; j++) {
            if (s1[i-1] == s2[j-1]) {
                curr[j] = prev[j-1] + 1;
            } else {
                curr[j] = max(prev[j], curr[j-1]);
            }
        }
        swap(prev, curr);
        fill(curr.begin(), curr.end(), 0);
    }
    
    return prev[n];
}</code></pre>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-3">常见变种问题</h3>
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-semibold text-lcs mb-2">最长公共子串</h4>
                                <p class="text-sm text-gray-700">
                                    子串是连续的子序列，求解方法类似LCS，但当字符不匹配时，长度重置为0。
                                </p>
                            </div>
                            
                            <div>
                                <h4 class="font-semibold text-lcs mb-2">最长回文子序列</h4>
                                <p class="text-sm text-gray-700">
                                    可以转化为原字符串与反转字符串的LCS问题。
                                </p>
                            </div>
                            
                            <div>
                                <h4 class="font-semibold text-lcs mb-2">编辑距离</h4>
                                <p class="text-sm text-gray-700">
                                    计算将一个字符串转换为另一个所需的最少操作数，是LCS的扩展应用。
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">时间复杂度分析</h3>
                    <p class="text-gray-700 mb-3">
                        LCS动态规划算法的时间复杂度为O(m×n)，其中m和n分别是两个输入字符串的长度。这比暴力枚举法的O(2^m + 2^n)有了极大的改进，
                        使得算法能够处理中等长度的字符串。
                    </p>
                    <p class="text-gray-700">
                        对于特别长的字符串（如长度超过10000），可以考虑使用一些更高级的算法或启发式方法，但在NOIP竞赛中，标准的动态规划解法已经能够满足大多数问题的需求。
                    </p>
                </div>
            </div>
        </section>

        <!-- 推荐题目 -->
        <section id="problems" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-lcs mb-6 flex items-center">
                <i class="fa fa-trophy mr-2"></i> 推荐练习题目
            </h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-primary">模板题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover-scale">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">洛谷 P1439 【模板】最长公共子序列</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">入门</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                标准的LCS问题，直接应用动态规划算法即可解决。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1439" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-primary">入门题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover-scale">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">洛谷 P1140 相似基因</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                LCS的变种问题，加入了匹配得分机制，适合初学者练习。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1140" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover-scale">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">洛谷 P2516 [HAOI2010]最长公共子序列</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及/提高-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                计算多个字符串的最长公共子序列，需要对标准算法进行扩展。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P2516" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-primary">进阶题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover-scale">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">洛谷 P4303 [AHOI2006]基因匹配</h4>
                                <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">提高+</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                结合了LCS和特殊匹配规则的问题，需要优化算法以处理大数据。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P4303" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover-scale">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">洛谷 P5439 【XR-2】记忆</h4>
                                <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">提高+</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                复杂的LCS变种问题，需要结合多种算法思想解决。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P5439" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // 初始化代码高亮
        document.addEventListener('DOMContentLoaded', function() {
            hljs.highlightAll();
            
            // LCS动画演示相关变量
            let animationInterval;
            let currentStep = 0;
            let steps = [];
            let isRunning = false;
            let s1 = "ABCBDAB";
            let s2 = "BDCAB";
            let dp = [];
            
            // 重置动画状态
            function resetAnimation() {
                clearInterval(animationInterval);
                isRunning = false;
                currentStep = 0;
                steps = [];
                document.getElementById('lcs-status').textContent = "状态: 等待开始";
                document.getElementById('lcs-execution').innerHTML = `
                    <div class="text-center text-gray-500 py-16">
                        <i class="fa fa-arrow-down mb-2"></i>
                        <p>点击"运行动画"开始演示</p>
                    </div>
                `;
                document.getElementById('lcs-result').innerHTML = "等待计算...";
                document.getElementById('lcs-result').className = "bg-white p-3 rounded border border-gray-200 min-h-[60px] text-center text-gray-500";
                
                // 重置代码高亮
                for (let i = 1; i <= 55; i++) {
                    document.getElementById(`lcs-code-${i}`).classList.remove('code-line-highlight');
                }
            }
            
            // 生成步骤
            function generateSteps() {
                s1 = document.getElementById('str1').value.trim();
                s2 = document.getElementById('str2').value.trim();
                
                if (s1 === "" || s2 === "") {
                    alert("请输入两个非空字符串");
                    return false;
                }
                
                // 更新代码中的字符串值（模拟）
                document.getElementById('lcs-code-47').innerHTML = `&nbsp;&nbsp;cin >> s1 >> s2; // s1 = "${s1}", s2 = "${s2}"`;
                
                // 初始化DP表
                const m = s1.length;
                const n = s2.length;
                dp = Array.from({length: m + 1}, () => Array(n + 1).fill(0));
                
                steps = [];
                
                // 添加初始化步骤
                steps.push({
                    type: 'init',
                    message: `初始化DP表，大小为(${m+1})×(${n+1})，初始值全为0`,
                    codeLine: 13,
                    table: structuredClone(dp)
                });
                
                // 填充DP表的步骤
                for (let i = 1; i <= m; i++) {
                    for (let j = 1; j <= n; j++) {
                        let message, codeLine;
                        
                        if (s1[i-1] === s2[j-1]) {
                            dp[i][j] = dp[i-1][j-1] + 1;
                            message = `s1[${i-1}] = '${s1[i-1]}' 与 s2[${j-1}] = '${s2[j-1]}' 匹配，dp[${i}][${j}] = dp[${i-1}][${j-1}] + 1 = ${dp[i-1][j-1]} + 1 = ${dp[i][j]}`;
                            codeLine = 19;
                        } else {
                            dp[i][j] = Math.max(dp[i-1][j], dp[i][j-1]);
                            message = `s1[${i-1}] = '${s1[i-1]}' 与 s2[${j-1}] = '${s2[j-1]}' 不匹配，dp[${i}][${j}] = max(dp[${i-1}][${j}], dp[${i}][${j-1}]) = max(${dp[i-1][j]}, ${dp[i][j-1]}) = ${dp[i][j]}`;
                            codeLine = 21;
                        }
                        
                        steps.push({
                            type: 'fill',
                            i: i,
                            j: j,
                            message: message,
                            codeLine: codeLine,
                            table: structuredClone(dp)
                        });
                    }
                }
                
                // 回溯查找LCS的步骤
                let i = m, j = n;
                let result = "";
                steps.push({
                    type: 'backtrack-start',
                    message: "开始回溯查找最长公共子序列",
                    codeLine: 27,
                    table: structuredClone(dp)
                });
                
                while (i > 0 && j > 0) {
                    if (s1[i-1] === s2[j-1]) {
                        result = s1[i-1] + result;
                        steps.push({
                            type: 'backtrack-match',
                            i: i,
                            j: j,
                            char: s1[i-1],
                            message: `找到匹配字符 '${s1[i-1]}'，加入LCS结果，当前LCS: ${result}`,
                            codeLine: 32,
                            table: structuredClone(dp),
                            result: result
                        });
                        i--;
                        j--;
                    } else if (dp[i-1][j] > dp[i][j-1]) {
                        steps.push({
                            type: 'backtrack-up',
                            i: i,
                            j: j,
                            message: `dp[${i-1}][${j}] (${dp[i-1][j]}) > dp[${i}][${j-1}] (${dp[i][j-1]})，向上移动`,
                            codeLine: 36,
                            table: structuredClone(dp),
                            result: result
                        });
                        i--;
                    } else {
                        steps.push({
                            type: 'backtrack-left',
                            i: i,
                            j: j,
                            message: `dp[${i-1}][${j}] (${dp[i-1][j]}) ≤ dp[${i}][${j-1}] (${dp[i][j-1]})，向左移动`,
                            codeLine: 38,
                            table: structuredClone(dp),
                            result: result
                        });
                        j--;
                    }
                }
                
                // 完成步骤
                steps.push({
                    type: 'complete',
                    message: `LCS计算完成，最长公共子序列为"${result}"，长度为${result.length}`,
                    codeLine: 42,
                    table: structuredClone(dp),
                    result: result
                });
                
                return true;
            }
            
            // 渲染DP表
            function renderTable(tableData, currentI = -1, currentJ = -1) {
                const m = tableData.length - 1;
                const n = tableData[0].length - 1;
                
                let html = '<table class="w-full border-collapse">';
                
                // 表头行（s2的字符）
                html += '<tr>';
                html += '<th class="table-cell bg-gray-100"></th>';
                html += '<th class="table-cell bg-gray-100">""</th>';
                for (let j = 0; j < n; j++) {
                    html += `<th class="table-cell bg-gray-100">${s2[j]}</th>`;
                }
                html += '</tr>';
                
                // 内容行
                for (let i = 0; i <= m; i++) {
                    html += '<tr>';
                    // 第一列（s1的字符）
                    if (i === 0) {
                        html += '<th class="table-cell bg-gray-100">""</th>';
                    } else {
                        html += `<th class="table-cell bg-gray-100">${s1[i-1]}</th>`;
                    }
                    
                    // 数据单元格
                    for (let j = 0; j <= n; j++) {
                        let cellClass = 'table-cell';
                        if (i === currentI && j === currentJ) {
                            cellClass += ' table-cell-current';
                        } else if (i > 0 && j > 0 && tableData[i][j] !== tableData[i-1][j] && tableData[i][j] !== tableData[i][j-1]) {
                            cellClass += ' table-cell-highlight';
                        }
                        html += `<td class="${cellClass}">${tableData[i][j]}</td>`;
                    }
                    html += '</tr>';
                }
                
                html += '</table>';
                
                document.getElementById('lcs-table').innerHTML = html;
            }
            
            // 执行一步动画
            function executeStep() {
                if (currentStep >= steps.length) {
                    clearInterval(animationInterval);
                    isRunning = false;
                    document.getElementById('lcs-status').textContent = "状态: 动画完成";
                    return;
                }
                
                const step = steps[currentStep];
                
                // 更新状态信息
                document.getElementById('lcs-status').textContent = `状态: ${step.message}`;
                
                // 更新执行过程展示
                const executionDiv = document.getElementById('lcs-execution');
                const stepElement = document.createElement('div');
                stepElement.className = 'step-item';
                stepElement.innerHTML = `<span class="step-number">${currentStep + 1}</span>${step.message}`;
                executionDiv.appendChild(stepElement);
                executionDiv.scrollTop = executionDiv.scrollHeight;
                
                // 渲染表格
                renderTable(step.table, step.i, step.j);
                
                // 高亮当前代码行
                for (let i = 1; i <= 55; i++) {
                    document.getElementById(`lcs-code-${i}`).classList.remove('code-line-highlight');
                }
                if (step.codeLine) {
                    document.getElementById(`lcs-code-${step.codeLine}`).classList.add('code-line-highlight');
                }
                
                // 更新结果
                if (step.result) {
                    document.getElementById('lcs-result').textContent = step.result;
                    document.getElementById('lcs-result').className = "bg-white p-3 rounded border border-lcs min-h-[60px] text-center font-semibold text-lcs";
                }
                
                currentStep++;
            }
            
            // 运行动画
            document.getElementById('lcs-run').addEventListener('click', function() {
                if (isRunning) return;
                
                resetAnimation();
                if (!generateSteps()) return;
                
                isRunning = true;
                document.getElementById('lcs-status').textContent = "状态: 动画运行中...";
                executeStep(); // 执行第一步
                animationInterval = setInterval(executeStep, 1500); // 每1.5秒执行一步
            });
            
            // 单步执行
            document.getElementById('lcs-step').addEventListener('click', function() {
                if (isRunning) {
                    clearInterval(animationInterval);
                    isRunning = false;
                    document.getElementById('lcs-status').textContent = "状态: 暂停中";
                }
                
                if (currentStep === 0) {
                    resetAnimation();
                    if (!generateSteps()) return;
                }
                
                executeStep();
            });
            
            // 重置动画
            document.getElementById('lcs-reset').addEventListener('click', resetAnimation);
            
            // 初始化重置
            resetAnimation();
        });
    </script>
</body>
</html>