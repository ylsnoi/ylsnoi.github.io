<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二分查找 - 姚老师信奥网</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A80F0', // 主色调：鲜明的蓝色
                        secondary: '#6C63FF', // 辅助色：紫色
                        syntax: '#FF9800', // 语法部分：橙色
                        algorithm: '#2ECC71', // 算法部分：绿色
                        datastructure: '#9C27B0', // 数据结构部分：深紫色
                        darkbg: '#F8FAFC', // 浅灰白背景
                        cardbg: '#FFFFFF', // 卡片背景
                        hoverbg: '#F0F2F5', // 悬停背景
                        binary: '#E91E63', // 二分查找主题色：粉红色
                        execution: '#FFEB3B', // 执行高亮：黄色
                    },
                    fontFamily: {
                        mono: ['Consolas', 'Monaco', 'Courier New', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .hover-scale {
                @apply transition-transform duration-300 hover:scale-[1.02];
            }
            .category-bg {
                @apply bg-gradient-to-r from-primary/5 to-primary/10;
            }
            .subcategory-bg {
                @apply bg-gradient-to-r from-secondary/5 to-secondary/10;
            }
            .binary-bg {
                @apply bg-gradient-to-r from-binary/5 to-binary/10;
            }
            .card-shadow {
                @apply shadow-sm hover:shadow-md transition-shadow duration-300;
            }
            .nav-item {
                @apply text-gray-700 hover:text-primary transition-colors duration-200;
            }
            .topic-card {
                @apply bg-cardbg rounded-lg p-5 card-shadow hover-scale;
            }
            .subtopic-item {
                @apply bg-white rounded-md p-3 border border-gray-100 hover:border-primary/50 transition-all duration-200 cursor-pointer;
            }
            .topic-header {
                @apply text-xl font-bold text-primary mb-4 flex items-center;
            }
            .subtopic-header {
                @apply font-semibold text-secondary mb-3;
            }
            .binary-header {
                @apply font-bold text-binary mb-3;
            }
            .site-title {
                @apply text-2xl font-bold text-primary tracking-tight;
            }
            .code-block {
                @apply bg-gray-800 text-gray-100 rounded-lg p-4 overflow-x-auto my-4 text-sm font-mono;
            }
            .step-item {
                @apply p-3 rounded-md mb-2 border-l-4 border-binary bg-binary/5;
            }
            .step-number {
                @apply inline-block w-6 h-6 rounded-full bg-binary text-white text-center mr-2 text-xs;
            }
            .binary-element {
                @apply inline-block w-10 h-10 rounded-md bg-gray-200 text-center leading-10 mx-1 transition-all duration-300;
            }
            .binary-element-current {
                @apply bg-binary text-white scale-110;
            }
            .binary-element-highlight {
                @apply bg-execution/50;
            }
            .binary-element-found {
                @apply bg-algorithm text-white scale-125;
            }
            .animation-controls {
                @apply flex flex-wrap gap-2 items-center my-4;
            }
            .animation-step {
                @apply bg-gray-100 p-3 rounded-lg mb-4;
            }
            .animation-progress {
                @apply w-full bg-gray-200 rounded-full h-2.5 mb-2;
            }
            .animation-progress-bar {
                @apply bg-binary h-2.5 rounded-full transition-all duration-300;
            }
            .animation-status {
                @apply text-sm text-gray-600 my-2 p-2 bg-gray-50 rounded;
            }
            .code-line {
                @apply transition-all duration-300;
            }
            .code-line-highlight {
                @apply bg-execution/30 text-gray-900 font-medium;
            }
        }
    </style>
</head>
<body class="bg-darkbg text-gray-800 font-sans min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fa fa-code text-primary text-3xl"></i>
                <h1 class="site-title">姚老师信奥网</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" class="nav-item">首页</a>
                <a href="#" class="nav-item">课程</a>
                <a href="#" class="nav-item">题库</a>
                <a href="#" class="nav-item">关于我们</a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- 搜索框 -->
                <div class="relative hidden md:block">
                    <input type="text" id="search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-64">
                    <button id="search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
                <div class="md:hidden">
                    <button class="text-gray-700">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移动端搜索框 -->
        <div class="md:hidden px-4 pb-3">
            <div class="relative">
                <input type="text" id="mobile-search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-full">
                <button id="mobile-search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 面包屑导航 -->
    <div class="bg-white border-b border-gray-200 py-2">
        <div class="container mx-auto px-4">
            <nav class="flex text-sm" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="#" class="text-gray-600 hover:text-primary">
                            <i class="fa fa-home mr-1"></i>首页
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">算法基础</a>
                        </div>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">查找算法</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <span class="text-binary font-medium">二分查找</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 页面标题 -->
        <div class="binary-bg rounded-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row md:items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-binary mb-2">二分查找</h1>
                    <p class="text-gray-700">
                        二分查找是一种高效的查找算法，适用于有序数组。它通过不断将查找范围减半来快速定位目标元素，时间复杂度为O(log n)，
                        是信息学奥赛中必须掌握的基础算法之一。
                    </p>
                </div>
                <div class="mt-4 md:mt-0">
                    <div class="flex space-x-3">
                        <a href="#concept" class="bg-binary hover:bg-binary/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-book mr-2"></i> 学习概念
                        </a>
                        <a href="#problems" class="bg-white border border-binary text-binary hover:bg-binary/5 px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-list-alt mr-2"></i> 查看题目
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 二分查找概述 -->
        <section id="concept" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-binary mb-6 flex items-center">
                <i class="fa fa-info-circle mr-2"></i> 二分查找概述
            </h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold mb-3">什么是二分查找？</h3>
                    <p class="text-gray-700">
                        二分查找（Binary Search），也称为折半查找，是一种在有序数组中查找特定元素的高效算法。它的基本思想是：
                        每次将查找范围缩小一半，通过比较目标值与中间元素的大小，决定在数组的左半部分或右半部分继续查找，
                        直到找到目标元素或确定目标元素不存在。
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg mt-3">
                        <h4 class="font-semibold mb-2">二分查找的前提条件：</h4>
                        <ul class="list-disc pl-5 space-y-2">
                            <li>待查找的数组必须是<span class="font-semibold text-binary">有序的</span>（通常是升序排列）</li>
                            <li>数组需要支持<span class="font-semibold text-binary">随机访问</span>（如数组，而不是链表）</li>
                        </ul>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-3">二分查找的基本步骤</h3>
                    <div class="space-y-3">
                        <div class="step-item">
                            <span class="step-number">1</span>
                            <div>
                                <p class="font-medium">初始化查找范围</p>
                                <p class="text-gray-700 text-sm">设置两个指针，left指向数组的起始位置（0），right指向数组的最后一个元素位置（n-1）</p>
                            </div>
                        </div>
                        
                        <div class="step-item">
                            <span class="step-number">2</span>
                            <div>
                                <p class="font-medium">计算中间位置</p>
                                <p class="text-gray-700 text-sm">计算中间索引 mid = (left + right) / 2（为避免溢出，更安全的写法是 mid = left + (right - left) / 2）</p>
                            </div>
                        </div>
                        
                        <div class="step-item">
                            <span class="step-number">3</span>
                            <div>
                                <p class="font-medium">比较中间元素与目标值</p>
                                <p class="text-gray-700 text-sm">
                                    - 如果中间元素等于目标值，查找成功，返回mid<br>
                                    - 如果中间元素大于目标值，说明目标值在左半部分，调整right = mid - 1<br>
                                    - 如果中间元素小于目标值，说明目标值在右半部分，调整left = mid + 1
                                </p>
                            </div>
                        </div>
                        
                        <div class="step-item">
                            <span class="step-number">4</span>
                            <div>
                                <p class="font-medium">重复与终止</p>
                                <p class="text-gray-700 text-sm">重复步骤2和3，直到找到目标元素或left > right（表示目标元素不存在）</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-3">二分查找的时间复杂度</h3>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <p class="mb-2">二分查找的时间复杂度为 <span class="font-mono bg-gray-200 px-1 rounded">O(log n)</span>，其中n是数组的长度。</p>
                        <p class="text-gray-700 text-sm">
                            这是因为每次查找都会将搜索范围缩小一半，最坏情况下需要log₂n次比较。相比线性查找的O(n)时间复杂度，
                            二分查找在处理大规模数据时效率更高，是信息学奥赛中优化程序性能的重要手段。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 二分查找动画演示 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-binary mb-6 flex items-center">
                <i class="fa fa-play-circle mr-2"></i> 二分查找过程演示
            </h2>
            
            <div class="space-y-6">
                <!-- 二分查找动画 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">二分查找执行过程可视化</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <p class="text-gray-700 mb-4">
                                下面的动画展示了二分查找的完整过程，包括范围初始化、中间元素计算、范围调整等步骤。
                                可以自定义数组和目标值来观察不同情况下的查找过程。
                            </p>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">目标值:</label>
                                <input type="number" id="target" value="23" min="1" max="100"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-binary">
                            </div>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">数组元素 (用逗号分隔):</label>
                                <input type="text" id="array-input" value="5,8,12,15,17,20,23,28,30,35,40"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-binary">
                                <p class="text-xs text-gray-500 mt-1">提示: 请输入升序排列的整数</p>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button id="binary-run" class="bg-binary hover:bg-binary/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-play mr-2"></i> 运行动画
                                </button>
                                <button id="binary-reset" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-refresh mr-2"></i> 重置
                                </button>
                            </div>
                            
                            <div id="binary-status" class="animation-status hidden">
                                状态: 等待开始
                            </div>
                            
                            <div class="animation-progress mt-4">
                                <div id="binary-progress-bar" class="animation-progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 h-64 overflow-y-auto" id="binary-execution">
                                <div class="text-center text-gray-500 py-8">
                                    <i class="fa fa-arrow-down mb-2"></i>
                                    <p>点击"运行动画"开始演示</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-gray-800 text-gray-100 rounded-lg p-4 h-64 overflow-y-auto font-mono text-sm" id="binary-code">
                                <div class="code-line" id="bcode-1">// 二分查找函数</div>
                                <div class="code-line" id="bcode-2">int binarySearch(int arr[], int n, int target) {</div>
                                <div class="code-line" id="bcode-3">&nbsp;&nbsp;int left = 0;</div>
                                <div class="code-line" id="bcode-4">&nbsp;&nbsp;int right = n - 1;</div>
                                <div class="code-line" id="bcode-5">&nbsp;</div>
                                <div class="code-line" id="bcode-6">&nbsp;&nbsp;while (left <= right) {</div>
                                <div class="code-line" id="bcode-7">&nbsp;&nbsp;&nbsp;&nbsp;// 计算中间位置</div>
                                <div class="code-line" id="bcode-8">&nbsp;&nbsp;&nbsp;&nbsp;int mid = left + (right - left) / 2;</div>
                                <div class="code-line" id="bcode-9">&nbsp;</div>
                                <div class="code-line" id="bcode-10">&nbsp;&nbsp;&nbsp;&nbsp;if (arr[mid] == target) {</div>
                                <div class="code-line" id="bcode-11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return mid; // 找到目标，返回索引</div>
                                <div class="code-line" id="bcode-12">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                                <div class="code-line" id="bcode-13">&nbsp;</div>
                                <div class="code-line" id="bcode-14">&nbsp;&nbsp;&nbsp;&nbsp;if (arr[mid] < target) {</div>
                                <div class="code-line" id="bcode-15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = mid + 1; // 目标在右半部分</div>
                                <div class="code-line" id="bcode-16">&nbsp;&nbsp;&nbsp;&nbsp;} else {</div>
                                <div class="code-line" id="bcode-17">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right = mid - 1; // 目标在左半部分</div>
                                <div class="code-line" id="bcode-18">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                                <div class="code-line" id="bcode-19">&nbsp;&nbsp;}</div>
                                <div class="code-line" id="bcode-20">&nbsp;</div>
                                <div class="code-line" id="bcode-21">&nbsp;&nbsp;return -1; // 未找到目标</div>
                                <div class="code-line" id="bcode-22">}</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 数组可视化区域 -->
                    <div class="mt-6">
                        <h4 class="font-semibold mb-3">数组可视化:</h4>
                        <div id="array-visualization" class="flex flex-wrap justify-center py-4 border border-gray-200 rounded-lg bg-white min-h-[100px]">
                            <!-- 数组元素将在这里动态生成 -->
                        </div>
                    </div>
                </div>
                
                <!-- 二分查找的变体 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">二分查找的常见变体</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <h4 class="font-semibold text-binary mb-2">查找第一个等于目标值的元素</h4>
                            <pre class="code-block text-xs"><code class="language-cpp">// 查找第一个等于目标值的元素索引
int findFirstOccurrence(int arr[], int n, int target) {
    int left = 0, right = n - 1;
    int result = -1;
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        if (arr[mid] == target) {
            result = mid;  // 记录找到的位置
            right = mid - 1;  // 继续向左查找
        }
        else if (arr[mid] < target) {
            left = mid + 1;
        }
        else {
            right = mid - 1;
        }
    }
    return result;
}</code></pre>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <h4 class="font-semibold text-binary mb-2">查找最后一个等于目标值的元素</h4>
                            <pre class="code-block text-xs"><code class="language-cpp">// 查找最后一个等于目标值的元素索引
int findLastOccurrence(int arr[], int n, int target) {
    int left = 0, right = n - 1;
    int result = -1;
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        if (arr[mid] == target) {
            result = mid;  // 记录找到的位置
            left = mid + 1;  // 继续向右查找
        }
        else if (arr[mid] < target) {
            left = mid + 1;
        }
        else {
            right = mid - 1;
        }
    }
    return result;
}</code></pre>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <h4 class="font-semibold text-binary mb-2">查找第一个大于等于目标值的元素</h4>
                            <pre class="code-block text-xs"><code class="language-cpp">// 查找第一个大于等于目标值的元素索引
int findFirstGreaterOrEqual(int arr[], int n, int target) {
    int left = 0, right = n - 1;
    int result = n;  // 默认返回n表示所有元素都小于目标
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        if (arr[mid] >= target) {
            result = mid;  // 可能是答案，继续向左查找
            right = mid - 1;
        }
        else {
            left = mid + 1;
        }
    }
    return result;
}</code></pre>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200">
                            <h4 class="font-semibold text-binary mb-2">递归版本的二分查找</h4>
                            <pre class="code-block text-xs"><code class="language-cpp">// 递归版本的二分查找
int binarySearchRecursive(int arr[], int left, int right, int target) {
    // 基本情况：查找范围无效
    if (left > right) {
        return -1;
    }
    
    // 计算中间位置
    int mid = left + (right - left) / 2;
    
    // 找到目标
    if (arr[mid] == target) {
        return mid;
    }
    
    // 目标在左半部分
    if (arr[mid] > target) {
        return binarySearchRecursive(arr, left, mid - 1, target);
    }
    
    // 目标在右半部分
    return binarySearchRecursive(arr, mid + 1, right, target);
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 二分查找代码示例 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-binary mb-6 flex items-center">
                <i class="fa fa-code mr-2"></i> 二分查找代码示例 (C++)
            </h2>
            
            <div class="space-y-6">
                <!-- 基础二分查找示例 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">1. 基础二分查找实现</h3>
                    <p class="text-gray-700 mb-3">
                        标准的二分查找实现，在有序数组中查找目标值并返回索引
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
using namespace std;

// 二分查找函数
// arr: 有序数组
// n: 数组长度
// target: 目标值
// 返回值: 目标值在数组中的索引，未找到返回-1
int binarySearch(int arr[], int n, int target) {
    int left = 0;          // 左边界
    int right = n - 1;     // 右边界
    
    // 当左边界小于等于右边界时继续查找
    while (left <= right) {
        // 计算中间位置，避免溢出
        int mid = left + (right - left) / 2;
        
        // 找到目标值，返回索引
        if (arr[mid] == target) {
            return mid;
        }
        // 目标值在右半部分
        else if (arr[mid] < target) {
            left = mid + 1;
        }
        // 目标值在左半部分
        else {
            right = mid - 1;
        }
    }
    
    // 未找到目标值
    return -1;
}

int main() {
    int arr[] = {2, 5, 8, 12, 16, 23, 38, 56, 72, 91};
    int n = sizeof(arr) / sizeof(arr[0]);
    int target;
    
    cout << "请输入要查找的数字: ";
    cin >> target;
    
    int result = binarySearch(arr, n, target);
    
    if (result != -1) {
        cout << "元素 " << target << " 找到，索引为 " << result << endl;
    } else {
        cout << "元素 " << target << " 未在数组中找到" << endl;
    }
    
    return 0;
}</code></pre>
                </div>
                
                <!-- 二分查找解决实际问题 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">2. 二分查找解决实际问题 - 查找插入位置</h3>
                    <p class="text-gray-700 mb-3">
                        利用二分查找确定目标值在有序数组中的插入位置，使得插入后数组仍然保持有序
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
using namespace std;

// 查找目标值在有序数组中的插入位置
int searchInsert(int arr[], int n, int target) {
    int left = 0;
    int right = n - 1;
    
    // 如果目标值大于所有元素，插入到最后
    if (target > arr[right]) {
        return n;
    }
    
    // 二分查找
    while (left < right) {
        int mid = left + (right - left) / 2;
        
        if (arr[mid] == target) {
            return mid;  // 找到目标值，直接返回其位置
        }
        else if (arr[mid] < target) {
            left = mid + 1;  // 目标在右半部分
        }
        else {
            right = mid;  // 目标在左半部分，不-1是因为可能就是插入位置
        }
    }
    
    // 循环结束时left == right，就是插入位置
    return left;
}

int main() {
    int nums[] = {1, 3, 5, 6};
    int n = sizeof(nums) / sizeof(nums[0]);
    int target;
    
    cout << "请输入目标值: ";
    cin >> target;
    
    int position = searchInsert(nums, n, target);
    cout << "插入位置为: " << position << endl;
    
    return 0;
}</code></pre>
                </div>
                
                <!-- 二分查找在答案范围上的应用 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">3. 二分查找在答案范围上的应用 - 求平方根</h3>
                    <p class="text-gray-700 mb-3">
                        利用二分查找求一个非负整数的平方根的整数部分，展示二分查找在数值计算中的应用
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
using namespace std;

// 计算x的平方根的整数部分
int mySqrt(int x) {
    // 特殊情况处理
    if (x == 0 || x == 1) {
        return x;
    }
    
    // 二分查找范围：1到x
    int left = 1;
    int right = x;
    int result = 0;
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        // 避免溢出，使用除法代替乘法
        if (mid == x / mid) {
            return mid;  // 找到精确的平方根
        }
        else if (mid < x / mid) {
            // 中间值的平方小于x，可能是候选答案
            result = mid;
            left = mid + 1;
        }
        else {
            right = mid - 1;
        }
    }
    
    return result;
}

int main() {
    int x;
    cout << "请输入一个非负整数: ";
    cin >> x;
    
    int sqrtX = mySqrt(x);
    cout << x << "的平方根的整数部分是: " << sqrtX << endl;
    
    return 0;
}</code></pre>
                </div>
            </div>
        </section>

        <!-- 二分查找算法应用 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-binary mb-6 flex items-center">
                <i class="fa fa-lightbulb-o mr-2"></i> 二分查找的算法应用
            </h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-semibold mb-3">二分查找在信息学奥赛中的典型应用</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-binary mb-2">有序数组中的查找</h4>
                            <p class="text-gray-700">
                                在有序数组中快速定位元素，解决查找、统计等问题，如在排好序的成绩表中查找特定分数的位置。
                            </p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-binary mb-2">答案范围上的二分</h4>
                            <p class="text-gray-700">
                                对于具有单调性的问题，在可能的答案范围内进行二分查找，如最大化最小值、最小化最大值等优化问题。
                            </p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-binary mb-2">计数问题</h4>
                            <p class="text-gray-700">
                                利用二分查找的变体统计某个元素在有序数组中的出现次数，或统计小于/大于某个值的元素数量。
                            </p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-binary mb-2">复杂数据结构中的查找</h4>
                            <p class="text-gray-700">
                                在有序的复杂数据结构（如结构体数组、字符串数组）中进行查找，只需定义相应的比较规则。
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">二分查找的注意事项</h3>
                    <ul class="list-disc pl-5 space-y-2 text-gray-700">
                        <li>二分查找仅适用于<span class="font-medium">有序数据</span>，如果数据无序，需要先排序</li>
                        <li>计算中间位置时，使用<span class="font-mono bg-gray-200 px-1 rounded">mid = left + (right - left) / 2</span>代替<span class="font-mono bg-gray-200 px-1 rounded">mid = (left + right) / 2</span>，避免整数溢出</li>
                        <li>注意循环终止条件和边界调整，避免死循环或遗漏元素</li>
                        <li>对于有重复元素的数组，要明确查找需求（第一个、最后一个或任意一个）</li>
                        <li>二分查找的优势在<span class="font-medium">大规模数据</span>中才能体现，小规模数据使用线性查找可能更简单高效</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 推荐题目 -->
        <section id="problems" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-binary mb-6 flex items-center">
                <i class="fa fa-trophy mr-2"></i> 推荐练习题目 (洛谷)
            </h2>
            
            <div class="space-y-6">
                <!-- 模板题 -->
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-primary">模板题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P2249 【深基13.例1】查找</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">入门</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                给定一个有序数组，多次查询某个数是否存在，存在则输出第一次出现的位置。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P2249" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1102 A-B 数对</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">入门</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                给定一个数组，求有多少对 (A,B) 满足 A - B = C，使用二分查找优化计数过程。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1102" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- 入门题 -->
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-secondary">入门题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-secondary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1873 砍树</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                在答案范围上应用二分查找，求砍树的最大高度，使得砍下的木材总量不少于需求。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1873" target="_blank" class="text-secondary hover:text-secondary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-secondary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P2678 跳石头</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                二分查找最大的最小跳跃距离，需要移除一些石头，使跳跃距离不小于该值。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P2678" target="_blank" class="text-secondary hover:text-secondary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-secondary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1024 一元三次方程求解</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                利用二分法在可能的根区间内查找一元三次方程的实根，精确到一定小数位数。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1024" target="_blank" class="text-secondary hover:text-secondary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- 进阶题 -->
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-binary">进阶题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-binary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P3382 【模板】三分法</h4>
                                <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">普及/提高-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                二分查找的扩展，用于在单峰函数上查找极值点，是信息学奥赛中的重要算法。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P3382" target="_blank" class="text-binary hover:text-binary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-binary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P2853 [USACO06DEC] Cow Picnic S</h4>
                                <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">普及/提高-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                结合图论与二分查找的综合题，求所有牛都能到达的牧场数量。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P2853" target="_blank" class="text-binary hover:text-binary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-binary/50 transition-all duration-300">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1182 数列分段 Section II</h4>
                                <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">普及/提高-</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">
                                将数列分成指定段数，使各段和的最大值最小，典型的二分答案问题。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1182" target="_blank" class="text-binary hover:text-binary/80 text-sm flex items-center">
                                前往做题 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化数组可视化
            updateArrayVisualization();
            
            // 运行按钮事件
            document.getElementById('binary-run').addEventListener('click', startBinarySearchAnimation);
            
            // 重置按钮事件
            document.getElementById('binary-reset').addEventListener('click', resetAnimation);
            
            // 输入变化时更新数组显示
            document.getElementById('array-input').addEventListener('change', updateArrayVisualization);
            document.getElementById('array-input').addEventListener('blur', updateArrayVisualization);
        });
        
        // 更新数组可视化
        function updateArrayVisualization() {
            const arrayInput = document.getElementById('array-input');
            const arrayVisualization = document.getElementById('array-visualization');
            const codeNum1 = document.getElementById('code-num1');
            const codeNum2 = document.getElementById('code-num2');
            
            // 清空可视化区域
            arrayVisualization.innerHTML = '';
            
            // 解析数组
            const arrayStr = arrayInput.value.trim();
            const arr = arrayStr.split(',').map(Number);
            
            // 创建数组元素可视化
            arr.forEach((num, index) => {
                const element = document.createElement('div');
                element.className = 'binary-element';
                element.textContent = num;
                element.dataset.index = index;
                arrayVisualization.appendChild(element);
            });
        }
        
        // 重置动画
        function resetAnimation() {
            // 重置代码高亮
            for (let i = 1; i <= 22; i++) {
                document.getElementById(`bcode-${i}`).classList.remove('code-line-highlight');
            }
            
            // 重置数组元素样式
            document.querySelectorAll('.binary-element').forEach(el => {
                el.classList.remove('binary-element-current', 'binary-element-highlight', 'binary-element-found');
            });
            
            // 重置状态和进度
            document.getElementById('binary-status').textContent = '状态: 已重置';
            document.getElementById('binary-status').classList.remove('hidden');
            document.getElementById('binary-progress-bar').style.width = '0%';
            document.getElementById('binary-execution').innerHTML = `
                <div class="text-center text-gray-500 py-8">
                    <i class="fa fa-arrow-down mb-2"></i>
                    <p>点击"运行动画"开始演示</p>
                </div>
            `;
            
            // 重置运行按钮状态
            document.getElementById('binary-run').disabled = false;
        }
        
        // 开始二分查找动画
        function startBinarySearchAnimation() {
            // 解析输入
            const arrayInput = document.getElementById('array-input');
            const targetInput = document.getElementById('target');
            const target = parseInt(targetInput.value);
            
            // 解析数组
            const arrayStr = arrayInput.value.trim();
            const arr = arrayStr.split(',').map(Number);
            
            // 验证输入
            if (arr.length === 0 || isNaN(target)) {
                alert('请输入有效的数组和目标值');
                return;
            }
            
            // 检查数组是否有序
            let isSorted = true;
            for (let i = 1; i < arr.length; i++) {
                if (arr[i] < arr[i - 1]) {
                    isSorted = false;
                    break;
                }
            }
            if (!isSorted) {
                if (!confirm('数组似乎不是升序排列的，这会影响二分查找结果。是否继续？')) {
                    return;
                }
            }
            
            // 禁用运行按钮
            document.getElementById('binary-run').disabled = true;
            
            // 重置动画状态
            resetAnimation();
            
            // 获取元素
            const executionLog = document.getElementById('binary-execution');
            const statusElement = document.getElementById('binary-status');
            const progressBar = document.getElementById('binary-progress-bar');
            
            // 初始化二分查找参数
            let left = 0;
            let right = arr.length - 1;
            let steps = [];
            let currentStep = 0;
            
            // 记录查找步骤
            executionLog.innerHTML = '<div class="font-medium mb-2">查找步骤:</div>';
            
            // 二分查找过程
            function step() {
                if (left > right) {
                    // 未找到目标
                    logStep(`查找结束，目标值 ${target} 不存在于数组中`);
                    highlightCode(21); // return -1
                    statusElement.textContent = `状态: 未找到目标值 ${target}`;
                    progressBar.style.width = '100%';
                    return;
                }
                
                // 计算中间位置
                const mid = left + Math.floor((right - left) / 2);
                logStep(`步骤 ${currentStep + 1}: left=${left}, right=${right}, mid=${mid}, arr[mid]=${arr[mid]}`);
                
                // 高亮当前中间元素
                resetArrayHighlights();
                document.querySelector(`.binary-element[data-index="${mid}"]`).classList.add('binary-element-current');
                
                // 高亮左右范围
                for (let i = left; i <= right; i++) {
                    document.querySelector(`.binary-element[data-index="${i}"]`).classList.add('binary-element-highlight');
                }
                
                // 高亮当前执行的代码行
                highlightCode(8); // int mid = ...
                
                // 延迟执行比较步骤
                setTimeout(() => {
                    if (arr[mid] === target) {
                        // 找到目标
                        logStep(`找到目标值 ${target}，索引为 ${mid}`);
                        document.querySelector(`.binary-element[data-index="${mid}"]`).classList.add('binary-element-found');
                        highlightCode(10, 11); // if (arr[mid] == target) 及 return
                        statusElement.textContent = `状态: 找到目标值 ${target}，索引为 ${mid}`;
                        progressBar.style.width = '100%';
                    } else if (arr[mid] < target) {
                        // 目标在右半部分
                        logStep(`${arr[mid]} < ${target}，调整左边界: left = ${mid + 1}`);
                        left = mid + 1;
                        highlightCode(14, 15); // if (arr[mid] < target) 及 left = ...
                    } else {
                        // 目标在左半部分
                        logStep(`${arr[mid]} > ${target}，调整右边界: right = ${mid - 1}`);
                        right = mid - 1;
                        highlightCode(16, 17); // else 及 right = ...
                    }
                    
                    // 更新进度
                    currentStep++;
                    const progress = Math.min(100, (currentStep / (Math.log2(arr.length) + 1)) * 100);
                    progressBar.style.width = `${progress}%`;
                    
                    // 继续下一步
                    setTimeout(step, 1500);
                }, 1500);
            }
            
            // 记录步骤日志
            function logStep(message) {
                const stepElement = document.createElement('div');
                stepElement.className = 'mb-1 text-sm';
                stepElement.textContent = message;
                executionLog.appendChild(stepElement);
                executionLog.scrollTop = executionLog.scrollHeight;
            }
            
            // 重置数组高亮
            function resetArrayHighlights() {
                document.querySelectorAll('.binary-element').forEach(el => {
                    el.classList.remove('binary-element-current', 'binary-element-highlight', 'binary-element-found');
                });
            }
            
            // 高亮代码行
            function highlightCode(...lines) {
                // 移除所有高亮
                for (let i = 1; i <= 22; i++) {
                    document.getElementById(`bcode-${i}`).classList.remove('code-line-highlight');
                }
                
                // 高亮指定行
                lines.forEach(line => {
                    document.getElementById(`bcode-${line}`).classList.add('code-line-highlight');
                });
            }
            
            // 开始第一步
            highlightCode(3, 4); // 初始化left和right
            statusElement.textContent = `状态: 开始查找目标值 ${target}`;
            setTimeout(step, 1000);
        }
    </script>
</body>
</html>