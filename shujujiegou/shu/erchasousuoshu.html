<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二叉搜索树 - 姚老师信奥网</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A80F0', // 主色调：鲜明的蓝色
                        secondary: '#6C63FF', // 辅助色：紫色
                        syntax: '#FF9800', // 语法部分：橙色
                        algorithm: '#2ECC71', // 算法部分：绿色
                        datastructure: '#9C27B0', // 数据结构部分：深紫色
                        darkbg: '#F8FAFC', // 浅灰白背景
                        cardbg: '#FFFFFF', // 卡片背景
                        hoverbg: '#F0F2F5', // 悬停背景
                        bst: '#E91E63', // 二叉搜索树主题色：粉红色
                        execution: '#FFEB3B', // 执行高亮：黄色
                    },
                    fontFamily: {
                        mono: ['Consolas', 'Monaco', 'Courier New', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .hover-scale {
                @apply transition-transform duration-300 hover:scale-[1.02];
            }
            .category-bg {
                @apply bg-gradient-to-r from-primary/5 to-primary/10;
            }
            .subcategory-bg {
                @apply bg-gradient-to-r from-secondary/5 to-secondary/10;
            }
            .bst-bg {
                @apply bg-gradient-to-r from-bst/5 to-bst/10;
            }
            .card-shadow {
                @apply shadow-sm hover:shadow-md transition-shadow duration-300;
            }
            .nav-item {
                @apply text-gray-700 hover:text-primary transition-colors duration-200;
            }
            .topic-card {
                @apply bg-cardbg rounded-lg p-5 card-shadow hover-scale;
            }
            .subtopic-item {
                @apply bg-white rounded-md p-3 border border-gray-100 hover:border-primary/50 transition-all duration-200 cursor-pointer;
            }
            .topic-header {
                @apply text-xl font-bold text-primary mb-4 flex items-center;
            }
            .subtopic-header {
                @apply font-semibold text-secondary mb-3;
            }
            .bst-header {
                @apply font-bold text-bst mb-3;
            }
            .site-title {
                @apply text-2xl font-bold text-primary tracking-tight;
            }
            .code-block {
                @apply bg-gray-800 text-gray-100 rounded-lg p-4 overflow-x-auto my-4 text-sm font-mono;
            }
            .step-item {
                @apply p-3 rounded-md mb-2 border-l-4 border-bst bg-bst/5;
            }
            .step-number {
                @apply inline-block w-6 h-6 rounded-full bg-bst text-white text-center mr-2 text-xs;
            }
            .bst-node {
                @apply w-12 h-12 rounded-full bg-white border-2 border-bst text-center flex items-center justify-center font-bold transition-all duration-300;
            }
            .bst-node-current {
                @apply bg-bst text-white scale-110;
            }
            .bst-node-found {
                @apply bg-algorithm text-white;
            }
            .bst-edge {
                @apply border-t-2 border-gray-400 absolute transform -z-10;
            }
            .animation-controls {
                @apply flex flex-wrap gap-2 items-center my-4;
            }
            .animation-step {
                @apply bg-gray-100 p-3 rounded-lg mb-4;
            }
            .animation-progress {
                @apply w-full bg-gray-200 rounded-full h-2.5 mb-2;
            }
            .animation-progress-bar {
                @apply bg-bst h-2.5 rounded-full transition-all duration-300;
            }
            .animation-status {
                @apply text-sm text-gray-600 my-2 p-2 bg-gray-50 rounded;
            }
            .code-line {
                @apply transition-all duration-300;
            }
            .code-line-highlight {
                @apply bg-execution/30 text-gray-900 font-medium;
            }
        }
    </style>
</head>
<body class="bg-darkbg text-gray-800 font-sans min-h-screen">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fa fa-code text-primary text-3xl"></i>
                <h1 class="site-title">姚老师信奥网</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" class="nav-item">首页</a>
                <a href="#" class="nav-item">课程</a>
                <a href="#" class="nav-item">题库</a>
                <a href="#" class="nav-item">关于我们</a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- 搜索框 -->
                <div class="relative hidden md:block">
                    <input type="text" id="search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-64">
                    <button id="search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
                <div class="md:hidden">
                    <button class="text-gray-700">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- 移动端搜索框 -->
        <div class="md:hidden px-4 pb-3">
            <div class="relative">
                <input type="text" id="mobile-search-input" placeholder="搜索算法、数据结构..." class="pl-10 pr-4 py-2 rounded-md bg-darkbg border border-gray-200 focus:outline-none focus:border-primary text-gray-700 w-full">
                <button id="mobile-search-button" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-primary">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 面包屑导航 -->
    <div class="bg-white border-b border-gray-200 py-2">
        <div class="container mx-auto px-4">
            <nav class="flex text-sm" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="#" class="text-gray-600 hover:text-primary">
                            <i class="fa fa-home mr-1"></i>首页
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">数据结构</a>
                        </div>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <a href="#" class="text-gray-600 hover:text-primary">树结构</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i class="fa fa-angle-right mx-2 text-gray-400"></i>
                            <span class="text-bst font-medium">二叉搜索树</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 页面标题 -->
        <div class="bst-bg rounded-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row md:items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-bst mb-2">二叉搜索树</h1>
                    <p class="text-gray-700">
                        二叉搜索树（BST）是一种高效的查找数据结构，支持快速插入、删除和查找操作。本页面将详细讲解二叉搜索树的定义、操作原理及实现方法，
                        帮助NOIP竞赛学生掌握这一重要数据结构。
                    </p>
                </div>
                <div class="mt-4 md:mt-0">
                    <div class="flex space-x-3">
                        <a href="#concept" class="bg-bst hover:bg-bst/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-book mr-2"></i> 学习概念
                        </a>
                        <a href="#problems" class="bg-white border border-bst text-bst hover:bg-bst/5 px-4 py-2 rounded-md transition-all flex items-center">
                            <i class="fa fa-list-alt mr-2"></i> 查看题目
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- 二叉搜索树概述 -->
        <section id="concept" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bst mb-6 flex items-center">
                <i class="fa fa-info-circle mr-2"></i> 二叉搜索树概述
            </h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold mb-3">什么是二叉搜索树？</h3>
                    <p class="text-gray-700">
                        二叉搜索树是一种特殊的二叉树，它的每个节点都包含一个关键字，并且具有以下性质：
                    </p>
                    <div class="bg-gray-50 p-4 rounded-lg mt-3">
                        <ul class="list-disc pl-5 space-y-2">
                            <li>对于任意节点，其左子树中所有节点的关键字都小于该节点的关键字</li>
                            <li>对于任意节点，其右子树中所有节点的关键字都大于该节点的关键字</li>
                            <li>左、右子树也分别是二叉搜索树</li>
                            <li>树中没有关键字相等的节点</li>
                        </ul>
                    </div>
                    
                    <div class="mt-6 flex justify-center">
                        <div class="inline-block">
                            <div class="flex justify-center">
                                <div class="bst-node">8</div>
                            </div>
                            <div class="flex justify-center mt-4">
                                <div class="bst-node mr-12">3</div>
                                <div class="bst-node ml-12">10</div>
                            </div>
                            <div class="flex justify-center mt-4">
                                <div class="bst-node mr-6">1</div>
                                <div class="bst-node ml-6">6</div>
                                <div class="bst-node ml-12">14</div>
                            </div>
                            <div class="flex justify-center mt-4">
                                <div class="bst-node ml-3 mr-3">4</div>
                                <div class="bst-node ml-3 mr-3">7</div>
                                <div class="bst-node ml-9">13</div>
                            </div>
                            <p class="text-center text-sm text-gray-500 mt-4">一个典型的二叉搜索树示例</p>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-3">二叉搜索树的优势</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <h4 class="font-semibold text-bst">高效的查找操作</h4>
                            <p class="text-sm text-gray-700">
                                平均情况下，查找、插入和删除操作的时间复杂度为O(log n)，优于数组和链表。
                            </p>
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <h4 class="font-semibold text-bst">有序性</h4>
                            <p class="text-sm text-gray-700">
                                可以通过中序遍历直接得到有序序列，无需额外排序操作。
                            </p>
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <h4 class="font-semibold text-bst">动态特性</h4>
                            <p class="text-sm text-gray-700">
                                支持动态插入和删除元素，不需要预先分配固定大小的空间。
                            </p>
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <h4 class="font-semibold text-bst">实现简单</h4>
                            <p class="text-sm text-gray-700">
                                相比平衡树（如AVL树、红黑树），实现更为简单，适合竞赛中快速编码。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 二叉搜索树操作演示 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bst mb-6 flex items-center">
                <i class="fa fa-play-circle mr-2"></i> 二叉搜索树操作演示
            </h2>
            
            <div class="space-y-6">
                <!-- 操作动画 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">二叉搜索树基本操作演示</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <p class="text-gray-700 mb-4">
                                下面的动画展示了二叉搜索树的三种基本操作：插入、查找和删除。
                                可以通过控制面板选择不同操作并观察执行过程。
                            </p>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">操作类型:</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <button id="op-insert" class="bg-bst text-white px-3 py-2 rounded-md transition-all">插入</button>
                                    <button id="op-search" class="bg-white border border-gray-300 text-gray-700 px-3 py-2 rounded-md transition-all">查找</button>
                                    <button id="op-delete" class="bg-white border border-gray-300 text-gray-700 px-3 py-2 rounded-md transition-all">删除</button>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">数值:</label>
                                <input type="number" id="bst-value" value="5" min="1" max="100"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-bst">
                            </div>
                            
                            <div class="flex space-x-2">
                                <button id="bst-run" class="bg-bst hover:bg-bst/90 text-white px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-play mr-2"></i> 执行
                                </button>
                                <button id="bst-reset" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md transition-all flex items-center">
                                    <i class="fa fa-refresh mr-2"></i> 重置
                                </button>
                            </div>
                            
                            <div id="bst-status" class="animation-status">
                                状态: 就绪 - 请选择操作和数值
                            </div>
                            
                            <div class="animation-progress">
                                <div id="bst-progress-bar" class="animation-progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-white border border-gray-200 rounded-lg p-4 h-80 overflow-y-auto" id="bst-execution">
                                <div class="text-center text-gray-500 py-12">
                                    <i class="fa fa-tree mb-2 text-2xl"></i>
                                    <p>选择操作并点击"执行"开始演示</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-1">
                            <div class="bg-gray-800 text-gray-100 rounded-lg p-4 h-80 overflow-y-auto font-mono text-sm" id="bst-code">
                                <div class="code-line" id="bst-code-1">// 二叉搜索树节点结构</div>
                                <div class="code-line" id="bst-code-2">struct Node {</div>
                                <div class="code-line" id="bst-code-3">&nbsp;&nbsp;int val;</div>
                                <div class="code-line" id="bst-code-4">&nbsp;&nbsp;Node *left, *right;</div>
                                <div class="code-line" id="bst-code-5">&nbsp;&nbsp;Node(int x) : val(x), left(nullptr), right(nullptr) {}</div>
                                <div class="code-line" id="bst-code-6">};</div>
                                <div class="code-line" id="bst-code-7">&nbsp;</div>
                                <div class="code-line" id="bst-code-8">// 插入操作</div>
                                <div class="code-line" id="bst-code-9">Node* insert(Node* root, int val) {</div>
                                <div class="code-line" id="bst-code-10">&nbsp;&nbsp;if (root == nullptr) {</div>
                                <div class="code-line" id="bst-code-11">&nbsp;&nbsp;&nbsp;&nbsp;return new Node(val);</div>
                                <div class="code-line" id="bst-code-12">&nbsp;&nbsp;}</div>
                                <div class="code-line" id="bst-code-13">&nbsp;&nbsp;</div>
                                <div class="code-line" id="bst-code-14">&nbsp;&nbsp;if (val < root->val) {</div>
                                <div class="code-line" id="bst-code-15">&nbsp;&nbsp;&nbsp;&nbsp;root->left = insert(root->left, val);</div>
                                <div class="code-line" id="bst-code-16">&nbsp;&nbsp;} else {</div>
                                <div class="code-line" id="bst-code-17">&nbsp;&nbsp;&nbsp;&nbsp;root->right = insert(root->right, val);</div>
                                <div class="code-line" id="bst-code-18">&nbsp;&nbsp;}</div>
                                <div class="code-line" id="bst-code-19">&nbsp;&nbsp;</div>
                                <div class="code-line" id="bst-code-20">&nbsp;&nbsp;return root;</div>
                                <div class="code-line" id="bst-code-21">}</div>
                                <div class="code-line" id="bst-code-22">&nbsp;</div>
                                <div class="code-line" id="bst-code-23">// 查找操作</div>
                                <div class="code-line" id="bst-code-24">bool search(Node* root, int val) {</div>
                                <div class="code-line" id="bst-code-25">&nbsp;&nbsp;if (root == nullptr) {</div>
                                <div class="code-line" id="bst-code-26">&nbsp;&nbsp;&nbsp;&nbsp;return false;</div>
                                <div class="code-line" id="bst-code-27">&nbsp;&nbsp;}</div>
                                <div class="code-line" id="bst-code-28">&nbsp;&nbsp;</div>
                                <div class="code-line" id="bst-code-29">&nbsp;&nbsp;if (root->val == val) {</div>
                                <div class="code-line" id="bst-code-30">&nbsp;&nbsp;&nbsp;&nbsp;return true;</div>
                                <div class="code-line" id="bst-code-31">&nbsp;&nbsp;} else if (val < root->val) {</div>
                                <div class="code-line" id="bst-code-32">&nbsp;&nbsp;&nbsp;&nbsp;return search(root->left, val);</div>
                                <div class="code-line" id="bst-code-33">&nbsp;&nbsp;} else {</div>
                                <div class="code-line" id="bst-code-34">&nbsp;&nbsp;&nbsp;&nbsp;return search(root->right, val);</div>
                                <div class="code-line" id="bst-code-35">&nbsp;&nbsp;}</div>
                                <div class="code-line" id="bst-code-36">}</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 可视化区域 -->
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-lg mb-3">二叉搜索树可视化</h3>
                    <div id="bst-visualization" class="min-h-[300px] flex justify-center items-center">
                        <div class="text-center text-gray-500">
                            <i class="fa fa-arrow-up mb-2"></i>
                            <p>执行操作后将在这里显示二叉搜索树</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 二叉搜索树实现 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bst mb-6 flex items-center">
                <i class="fa fa-code mr-2"></i> 二叉搜索树实现 (C++)
            </h2>
            
            <div class="space-y-6">
                <!-- 基本实现 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">1. 二叉搜索树基本实现</h3>
                    <p class="text-gray-700 mb-3">
                        包含节点定义、插入、查找、删除和遍历操作的完整实现
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
using namespace std;

// 二叉搜索树节点结构
struct Node {
    int val;
    Node *left, *right;
    Node(int x) : val(x), left(nullptr), right(nullptr) {}
};

// 插入操作
Node* insert(Node* root, int val) {
    // 如果树为空，创建新节点作为根节点
    if (root == nullptr) {
        return new Node(val);
    }
    
    // 否则递归地插入到左子树或右子树
    if (val < root->val) {
        root->left = insert(root->left, val);
    } else if (val > root->val) {  // 假设没有重复值
        root->right = insert(root->right, val);
    }
    
    return root;
}

// 查找操作
bool search(Node* root, int val) {
    // 如果树为空或找到叶子节点仍未找到，返回false
    if (root == nullptr) {
        return false;
    }
    
    // 找到目标值，返回true
    if (root->val == val) {
        return true;
    }
    // 目标值小于当前节点值，在左子树中查找
    else if (val < root->val) {
        return search(root->left, val);
    }
    // 目标值大于当前节点值，在右子树中查找
    else {
        return search(root->right, val);
    }
}

// 找到以root为根的树中的最小值节点
Node* findMin(Node* root) {
    while (root->left != nullptr) {
        root = root->left;
    }
    return root;
}

// 删除操作
Node* remove(Node* root, int val) {
    // 树为空，直接返回
    if (root == nullptr) {
        return root;
    }
    
    // 查找要删除的节点
    if (val < root->val) {
        root->left = remove(root->left, val);
    } else if (val > root->val) {
        root->right = remove(root->right, val);
    } else {
        // 找到要删除的节点
        
        // 情况1：叶子节点（没有子节点）
        if (root->left == nullptr && root->right == nullptr) {
            delete root;
            root = nullptr;
        }
        // 情况2：只有一个子节点
        else if (root->left == nullptr) {
            Node* temp = root;
            root = root->right;
            delete temp;
        } else if (root->right == nullptr) {
            Node* temp = root;
            root = root->left;
            delete temp;
        }
        // 情况3：有两个子节点
        else {
            // 找到右子树中的最小值节点
            Node* temp = findMin(root->right);
            // 用最小值替换当前节点值
            root->val = temp->val;
            // 删除那个最小值节点
            root->right = remove(root->right, temp->val);
        }
    }
    return root;
}

// 中序遍历（得到有序序列）
void inorder(Node* root) {
    if (root == nullptr) return;
    inorder(root->left);    // 遍历左子树
    cout << root->val << " "; // 访问当前节点
    inorder(root->right);   // 遍历右子树
}

// 前序遍历
void preorder(Node* root) {
    if (root == nullptr) return;
    cout << root->val << " "; // 访问当前节点
    preorder(root->left);   // 遍历左子树
    preorder(root->right);  // 遍历右子树
}

// 后序遍历
void postorder(Node* root) {
    if (root == nullptr) return;
    postorder(root->left);  // 遍历左子树
    postorder(root->right); // 遍历右子树
    cout << root->val << " "; // 访问当前节点
}

int main() {
    Node* root = nullptr;
    
    // 插入节点
    root = insert(root, 50);
    root = insert(root, 30);
    root = insert(root, 70);
    root = insert(root, 20);
    root = insert(root, 40);
    root = insert(root, 60);
    root = insert(root, 80);
    
    cout << "中序遍历: ";
    inorder(root);  // 中序遍历结果应为升序
    cout << endl;
    
    // 查找测试
    int key = 40;
    if (search(root, key)) {
        cout << key << " 存在于树中" << endl;
    } else {
        cout << key << " 不存在于树中" << endl;
    }
    
    // 删除测试
    root = remove(root, 50);
    cout << "删除50后中序遍历: ";
    inorder(root);
    cout << endl;
    
    return 0;
}</code></pre>
                </div>
                
                <!-- 应用示例 -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">2. 二叉搜索树应用 - 统计频率</h3>
                    <p class="text-gray-700 mb-3">
                        使用二叉搜索树统计数组中元素出现的频率，并按升序输出结果
                    </p>
                    
                    <pre class="code-block"><code class="language-cpp">#include <iostream>
#include <vector>
using namespace std;

// 带频率计数的BST节点
struct FrequencyNode {
    int val;
    int count;  // 记录出现次数
    FrequencyNode *left, *right;
    FrequencyNode(int x) : val(x), count(1), left(nullptr), right(nullptr) {}
};

// 插入并计数
FrequencyNode* insertWithCount(FrequencyNode* root, int val) {
    if (root == nullptr) {
        return new FrequencyNode(val);
    }
    
    if (val < root->val) {
        root->left = insertWithCount(root->left, val);
    } else if (val > root->val) {
        root->right = insertWithCount(root->right, val);
    } else {
        // 值已存在，增加计数
        root->count++;
    }
    
    return root;
}

// 中序遍历并收集结果
void collectFrequency(FrequencyNode* root, vector<pair<int, int>>& result) {
    if (root == nullptr) return;
    collectFrequency(root->left, result);
    result.push_back({root->val, root->count});
    collectFrequency(root->right, result);
}

// 统计数组元素频率
vector<pair<int, int>> countFrequency(int arr[], int n) {
    FrequencyNode* root = nullptr;
    for (int i = 0; i < n; i++) {
        root = insertWithCount(root, arr[i]);
    }
    
    vector<pair<int, int>> result;
    collectFrequency(root, result);
    return result;
}

int main() {
    int arr[] = {5, 3, 8, 5, 2, 5, 7, 3, 8, 9};
    int n = sizeof(arr) / sizeof(arr[0]);
    
    vector<pair<int, int>> freq = countFrequency(arr, n);
    
    cout << "元素频率（升序）:" << endl;
    for (auto& p : freq) {
        cout << p.first << " 出现了 " << p.second << " 次" << endl;
    }
    
    return 0;
}</code></pre>
                </div>
            </div>
        </section>

        <!-- 二叉搜索树时间复杂度分析 -->
        <section class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bst mb-6 flex items-center">
                <i class="fa fa-clock-o mr-2"></i> 时间复杂度分析
            </h2>
            
            <div class="space-y-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-lg mb-3">二叉搜索树各操作的时间复杂度</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="py-3 px-4 border-b text-left">操作</th>
                                    <th class="py-3 px-4 border-b text-left">平均情况</th>
                                    <th class="py-3 px-4 border-b text-left">最坏情况</th>
                                    <th class="py-3 px-4 border-b text-left">说明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="py-3 px-4 border-b">查找</td>
                                    <td class="py-3 px-4 border-b">O(log n)</td>
                                    <td class="py-3 px-4 border-b">O(n)</td>
                                    <td class="py-3 px-4 border-b">与树的高度相关</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="py-3 px-4 border-b">插入</td>
                                    <td class="py-3 px-4 border-b">O(log n)</td>
                                    <td class="py-3 px-4 border-b">O(n)</td>
                                    <td class="py-3 px-4 border-b">需要先查找插入位置</td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4 border-b">删除</td>
                                    <td class="py-3 px-4 border-b">O(log n)</td>
                                    <td class="py-3 px-4 border-b">O(n)</td>
                                    <td class="py-3 px-4 border-b">需要查找并处理三种情况</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="py-3 px-4 border-b">遍历</td>
                                    <td class="py-3 px-4 border-b">O(n)</td>
                                    <td class="py-3 px-4 border-b">O(n)</td>
                                    <td class="py-3 px-4 border-b">必须访问所有节点</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                        <p class="text-sm text-yellow-700">
                            <i class="fa fa-exclamation-triangle mr-2"></i>
                            注意：当二叉搜索树退化为链表时（如插入有序数据），所有操作的时间复杂度都会退化为O(n)。在竞赛中需注意这种情况，
                            必要时可使用平衡树或随机化插入来避免。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 推荐题目 -->
        <section id="problems" class="topic-card mb-8">
            <h2 class="text-2xl font-bold text-bst mb-6 flex items-center">
                <i class="fa fa-trophy mr-2"></i> 推荐练习题目 (洛谷)
            </h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-primary">模板题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P3369 【模板】普通平衡树</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">入门</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                实现一个支持插入、删除、查询排名、查询第k大等操作的平衡树，可用二叉搜索树实现。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P3369" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-primary transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1177 【模板】排序</h4>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">入门</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                利用二叉搜索树的中序遍历特性实现排序功能，巩固对BST有序性的理解。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1177" target="_blank" class="text-primary hover:text-primary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-secondary">入门题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-secondary transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1030 求先序排列</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                根据中序和后序遍历求先序遍历，考查对二叉树结构的理解。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1030" target="_blank" class="text-secondary hover:text-secondary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-secondary transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1305 新二叉树</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                根据先序遍历构建二叉树并输出中序和后序遍历，熟悉二叉树的基本操作。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1305" target="_blank" class="text-secondary hover:text-secondary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-secondary transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P2149 【模板】二叉搜索树</h4>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">普及-</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                实现二叉搜索树的基本操作，包括插入和查询排名。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P2149" target="_blank" class="text-secondary hover:text-secondary/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-semibold mb-4 text-bst">进阶题</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-bst transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1530 分数加法</h4>
                                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">普及/提高-</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                利用二叉搜索树存储分数并进行排序和去重，综合应用BST特性。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1530" target="_blank" class="text-bst hover:text-bst/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-bst transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P3807 【模板】卢卡斯定理</h4>
                                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">普及/提高-</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                虽然是数论题，但可以利用二叉搜索树优化组合数的计算过程。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P3807" target="_blank" class="text-bst hover:text-bst/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-bst transition-all">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-semibold">P1967 货车运输</h4>
                                <span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded">提高+/省选-</span>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">
                                结合最大生成树和二叉搜索树的思想，解决路径查询问题。
                            </p>
                            <a href="https://www.luogu.com.cn/problem/P1967" target="_blank" class="text-bst hover:text-bst/80 text-sm flex items-center">
                                查看题目 <i class="fa fa-external-link ml-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // 初始化代码高亮
        document.addEventListener('DOMContentLoaded', function() {
            hljs.highlightAll();
            
            // 操作按钮切换
            const opButtons = [
                document.getElementById('op-insert'),
                document.getElementById('op-search'),
                document.getElementById('op-delete')
            ];
            
            opButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // 重置所有按钮样式
                    opButtons.forEach(b => {
                        b.className = 'bg-white border border-gray-300 text-gray-700 px-3 py-2 rounded-md transition-all';
                    });
                    
                    // 设置当前按钮样式
                    this.className = 'bg-bst text-white px-3 py-2 rounded-md transition-all';
                });
            });
            
            // 初始化BST
            let bstRoot = null;
            let steps = [];
            let currentStep = 0;
            let animationInterval = null;
            
            // BST节点类
            class BSTNode {
                constructor(val) {
                    this.val = val;
                    this.left = null;
                    this.right = null;
                }
            }
            
            // 插入操作及步骤记录
            function insertAndRecord(root, val) {
                steps = [];
                steps.push(`开始插入值 ${val}`);
                
                if (root === null) {
                    steps.push(`树为空，创建新节点 ${val} 作为根节点`);
                    return new BSTNode(val);
                }
                
                let current = root;
                let parent = null;
                let direction = '';
                
                while (current !== null) {
                    steps.push(`当前节点: ${current.val}`);
                    parent = current;
                    
                    if (val < current.val) {
                        steps.push(`${val} < ${current.val}，移向左子树`);
                        current = current.left;
                        direction = 'left';
                    } else {
                        steps.push(`${val} > ${current.val}，移向右子树`);
                        current = current.right;
                        direction = 'right';
                    }
                }
                
                steps.push(`找到插入位置，在 ${parent.val} 的${direction}子树插入 ${val}`);
                parent[direction] = new BSTNode(val);
                steps.push(`插入完成`);
                
                return root;
            }
            
            // 查找操作及步骤记录
            function searchAndRecord(root, val) {
                steps = [];
                steps.push(`开始查找值 ${val}`);
                
                if (root === null) {
                    steps.push(`树为空，未找到 ${val}`);
                    return false;
                }
                
                let current = root;
                while (current !== null) {
                    steps.push(`当前节点: ${current.val}`);
                    
                    if (current.val === val) {
                        steps.push(`找到值 ${val}`);
                        return true;
                    } else if (val < current.val) {
                        steps.push(`${val} < ${current.val}，移向左子树`);
                        current = current.left;
                    } else {
                        steps.push(`${val} > ${current.val}，移向右子树`);
                        current = current.right;
                    }
                }
                
                steps.push(`未找到值 ${val}`);
                return false;
            }
            
            // 执行操作
            document.getElementById('bst-run').addEventListener('click', function() {
                const value = parseInt(document.getElementById('bst-value').value);
                let operation = '';
                
                // 确定当前选中的操作
                if (document.getElementById('op-insert').classList.contains('bg-bst')) {
                    operation = 'insert';
                } else if (document.getElementById('op-search').classList.contains('bg-bst')) {
                    operation = 'search';
                } else if (document.getElementById('op-delete').classList.contains('bg-bst')) {
                    operation = 'delete';
                    steps = [];
                    steps.push('删除操作演示即将上线，敬请期待');
                    startAnimation();
                    return;
                }
                
                // 执行相应操作
                if (operation === 'insert') {
                    bstRoot = insertAndRecord(bstRoot, value);
                    // 高亮插入相关代码
                    highlightCodeLines([9, 10, 11, 12, 14, 15, 16, 17, 18, 20]);
                } else if (operation === 'search') {
                    searchAndRecord(bstRoot, value);
                    // 高亮查找相关代码
                    highlightCodeLines([23, 24, 25, 26, 27, 29, 30, 31, 32, 33, 34, 35]);
                }
                
                // 更新状态和可视化
                document.getElementById('bst-status').textContent = `状态: 执行${operation === 'insert' ? '插入' : '查找'}操作`;
                startAnimation();
            });
            
            // 重置按钮
            document.getElementById('bst-reset').addEventListener('click', function() {
                if (animationInterval) {
                    clearInterval(animationInterval);
                    animationInterval = null;
                }
                
                bstRoot = null;
                steps = [];
                currentStep = 0;
                
                document.getElementById('bst-execution').innerHTML = `
                    <div class="text-center text-gray-500 py-12">
                        <i class="fa fa-tree mb-2 text-2xl"></i>
                        <p>选择操作并点击"执行"开始演示</p>
                    </div>
                `;
                
                document.getElementById('bst-visualization').innerHTML = `
                    <div class="text-center text-gray-500">
                        <i class="fa fa-arrow-up mb-2"></i>
                        <p>执行操作后将在这里显示二叉搜索树</p>
                    </div>
                `;
                
                document.getElementById('bst-status').textContent = '状态: 就绪 - 请选择操作和数值';
                document.getElementById('bst-progress-bar').style.width = '0%';
                
                // 清除代码高亮
                clearCodeHighlights();
            });
            
            // 开始动画
            function startAnimation() {
                if (animationInterval) {
                    clearInterval(animationInterval);
                }
                
                currentStep = 0;
                updateAnimationStep();
                
                animationInterval = setInterval(function() {
                    currentStep++;
                    if (currentStep >= steps.length) {
                        clearInterval(animationInterval);
                        animationInterval = null;
                        // 最后一步更新完整的树可视化
                        visualizeBST(bstRoot);
                        return;
                    }
                    updateAnimationStep();
                }, 1500);
            }
            
            // 更新动画步骤
            function updateAnimationStep() {
                // 更新步骤显示
                let stepsHtml = '';
                for (let i = 0; i < steps.length; i++) {
                    stepsHtml += `<div class="p-2 ${i === currentStep ? 'bg-bst/10 rounded' : ''}">${i + 1}. ${steps[i]}</div>`;
                }
                document.getElementById('bst-execution').innerHTML = stepsHtml;
                
                // 更新进度条
                const progress = ((currentStep + 1) / steps.length) * 100;
                document.getElementById('bst-progress-bar').style.width = `${progress}%`;
                
                // 更新状态
                document.getElementById('bst-status').textContent = `状态: ${steps[currentStep]}`;
                
                // 更新可视化（对于插入操作，逐步显示）
                if (document.getElementById('op-insert').classList.contains('bg-bst')) {
                    visualizeBST(bstRoot);
                } else if (document.getElementById('op-search').classList.contains('bg-bst')) {
                    const value = parseInt(document.getElementById('bst-value').value);
                    visualizeBST(bstRoot, value);
                }
            }
            
            // 可视化BST
            function visualizeBST(root, highlightValue = null) {
                if (!root) {
                    document.getElementById('bst-visualization').innerHTML = `
                        <div class="text-center text-gray-500">
                            <p>树为空</p>
                        </div>
                    `;
                    return;
                }
                
                // 创建可视化容器
                const container = document.createElement('div');
                container.className = 'w-full';
                
                // 递归构建树的HTML
                function buildTreeHtml(node, isRoot = false) {
                    if (!node) return '';
                    
                    const isHighlighted = highlightValue !== null && 
                                        (node.val === highlightValue || 
                                         (highlightValue < node.val && node.left && node.left.val === highlightValue) ||
                                         (highlightValue > node.val && node.right && node.right.val === highlightValue));
                    
                    const nodeClass = `bst-node ${isHighlighted ? 'bst-node-current' : ''} ${node.val === highlightValue ? 'bst-node-found' : ''}`;
                    
                    let html = `<div class="flex flex-col items-center">`;
                    html += `<div class="${nodeClass}">${node.val}</div>`;
                    
                    if (node.left || node.right) {
                        html += `<div class="flex justify-center w-full mt-4">`;
                        html += `<div class="mr-4">${buildTreeHtml(node.left)}</div>`;
                        html += `<div class="ml-4">${buildTreeHtml(node.right)}</div>`;
                        html += `</div>`;
                    }
                    
                    html += `</div>`;
                    return html;
                }
                
                container.innerHTML = buildTreeHtml(root, true);
                document.getElementById('bst-visualization').innerHTML = '';
                document.getElementById('bst-visualization').appendChild(container);
            }
            
            // 高亮代码行
            function highlightCodeLines(lineNumbers) {
                clearCodeHighlights();
                
                lineNumbers.forEach(line => {
                    const element = document.getElementById(`bst-code-${line}`);
                    if (element) {
                        element.classList.add('code-line-highlight');
                    }
                });
            }
            
            // 清除代码高亮
            function clearCodeHighlights() {
                document.querySelectorAll('#bst-code .code-line').forEach(el => {
                    el.classList.remove('code-line-highlight');
                });
            }
        });
    </script>
</body>
</html>